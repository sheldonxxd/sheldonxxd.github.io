[{"title":"ç®€åŒ–ç‰ˆFRETåˆ†æ","url":"/2021/01/12/simpleFRETanalysis/","content":"\nè„šæœ¬ä½¿ç”¨æ–¹æ³•è¯¦è§ä»£ç å†…æ³¨é‡Šï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦æ ¹æ®å®éªŒå®¤å…·ä½“ä»ªå™¨å‚æ•°è®¾ç½®å¥½å…‰å­æ•°è½¬æ¢çš„ç›¸å…³å‚æ•°ã€‚\n\n- EM_Gain = 500;  // æ‹æ‘„æ—¶è®¾ç½®çš„å‚æ•°\n- Offset = 204;  // ç›¸æœºå†…ç½®\n- Sensitivity = 16.9;  // ç›¸æœºå†…ç½®\n- QE = 0.9;  //ç›¸æœºå†…ç½®ï¼Œä¹Ÿä¸è§å…‰æŸ“æ–™ç›¸å…³\n\n```javascript\n/**\n * Author: Xiaodong Xie\n * Date: 2021/1/12\n * Email: sheldon_sinap@163.com\n * Functionï¼šæ­¤ImageJè„šæœ¬ä¸“ç”¨äºç®€æ˜“çš„è§å…‰FRETåˆ†æ\n * \n * ## ä½¿ç”¨æ­¥éª¤  \n * 1. åˆ†åˆ«å°†ç›¸åŒè§†é‡é‡‡é›†çš„donorå’Œreceptorä¸¤ä¸ªé€šé“çš„å›¾åƒç”¨ImageJæ‰“å¼€\n * 2. å³é”®ç‚¹å‡»å›¾åƒè¿›è¡Œrenameï¼Œä¿®æ”¹å›¾åƒåç§°ä¸ºdonoræˆ–è€…receptorå¹¶ä¸”ä¿å­˜ä¸ºtif\n * 3. ä½¿ç”¨\"Process > Find Maxima...\"åŠŸèƒ½åˆ†åˆ«å¯¹donorå’Œrecoptorè¿›è¡Œé¢„è§ˆï¼Œè·å–åˆé€‚çš„ prominence å‚æ•°ï¼ˆhï¼‰\n * 4. åœ¨æ­¤è„šæœ¬ä¸­ä¿®æ”¹å¯¹åº”çš„ prominence å‚æ•°\n * 5. ç‚¹å‡»runè¿è¡Œæ­¤è„šæœ¬\n * 6. æ‰‹åŠ¨ä¿å­˜ç¨‹åºè®¡ç®—Resultsåˆ°csvæ–‡ä»¶\n * \n */\nrequires(\"1.53c\");\n\n// photon conversionå‚æ•°\nEM_Gain = 500;  // æ‹æ‘„æ—¶è®¾ç½®çš„å‚æ•°\nOffset = 204;  // ç›¸æœºå†…ç½®\nSensitivity = 16.9;  // ç›¸æœºå†…ç½®\nQE = 0.9;  //ç›¸æœºå†…ç½®ï¼Œä¹Ÿä¸è§å…‰æŸ“æ–™ç›¸å…³\n\n // åœ¨æ­¤ä¿®æ”¹donorå’Œreceptorçš„prominenceå‚æ•°\n h_donor = 250;\n h_receptor = 250;\n\n // è¿è¡Œä¸»ä½“è¿‡ç¨‹ ===\n donor = \"donor.tif\";\n receptor = \"receptor.tif\";\n selectWindow(receptor);\n selectWindow(donor);  \n// é€‰æ‹©çª—å£ï¼Œå¦‚æœæ²¡æœ‰renameä¼šæŠ¥é”™æç¤ºå¹¶ç»ˆæ­¢ç¨‹åº\n\n\n// ä¸‹é¢çš„æ–¹å¼æ›´åŠ æ–¹ä¾¿æ— éœ€å†é¢å¤–è‡ªå®šä¹‰å‡½æ•°\nselectWindow(donor);\nrun(\"Find Maxima...\", \"prominence=\"+h_donor+\" output=[Single Points]\");\nselectWindow(receptor);\nrun(\"Find Maxima...\", \"prominence=\"+h_receptor+\" output=[Single Points]\");\nrun(\"Merge Channels...\", \"c1=[\"+receptor+\" Maxima] c2=[\"+donor+\" Maxima] create\");\nrun(\"RGB Color\");\nrun(\"8-bit\");\n// å¯¹mergeä¹‹åçš„locationså†è¿›è¡Œfind maxima\nlocations = pFinder(10);  \nselectWindow(\"Composite\");\nclose();\nselectWindow(\"Composite (RGB)\");\nclose();\n\n\n N = lengthOf(locations)/2;\n for(i=0;i<N;i++){\n     x = locations[2*i];\n     y = locations[2*i+1];\n     selectWindow(donor);\n     value_donor = getPixel(x,y);\n     selectWindow(receptor);\n     value_receptor = getPixel(x,y);\n     ratio = (value_receptor)/(value_donor+value_receptor);  // è‡ªå®šä¹‰æ¯”å€¼è®¡ç®—å…¬å¼\n     n_donor = getPhotonNumber(value_donor, EM_Gain, Offset, Sensitivity, QE);\n     n_receptor = getPhotonNumber(value_receptor, EM_Gain, Offset, Sensitivity, QE);\n     n_ratio = n_receptor/(n_donor+n_receptor);  // è‡ªå®šä¹‰æ¯”å€¼è®¡ç®—å…¬å¼\n     setResult(\"X\", i, x);\n     setResult(\"Y\", i, y);\n     setResult(\"value_donor\", i, value_donor);\n     setResult(\"value_receptor\", i, value_receptor);\n     setResult(\"value_ratio\", i, ratio);\n     setResult(\"photon_num_donor\", i, n_donor);\n     setResult(\"photon_num_receptor\", i, n_receptor);\n     setResult(\"photon_num_ratio\", i, n_ratio);\n }\n updateResults();  //åˆ·æ–°Resultsçª—å£æ˜¾ç¤ºæ”¶é›†åˆ°çš„æ•°æ®\n selectWindow(\"Results\");   //è¯·è‡ªè¡Œä¿å­˜æ•°æ®è¡¨æ ¼\n\n// è‡ªå®šä¹‰å‡½æ•° ===\nfunction pFinder(h){\n    // find all particles by bultin ImageJ function and return their locations\n    run(\"Find Maxima...\", \"prominence=\"+h+\" strict output=[List]\");\n    selectWindow(\"Results\");\n    locs = newArray(2*nResults);\n    for(i=0;i<nResults;i++){\n        locs[2*i]=getResult(\"X\",i);\n        locs[2*i+1]=getResult(\"Y\",i);\n    }\n    run(\"Close\");\n    return locs;\n}\n\nfunction getPhotonNumber(value, EM_Gain, Offset, Sensitivity, QE){\n    // æ ¹æ®EMCCDçš„ç°åº¦å€¼è®¡ç®—å®é™…å…‰å­æ•°\n    p_number = (value-Offset)*Sensitivity/EM_Gain/QE;\n    return p_number;\n}\n```\n\n","categories":["ImageJ"]},{"title":"é›†æˆtyporaå’Œhexo","url":"/2021/01/10/GUIforLog/","content":"\næƒ³æ‰“é€ ä¸€ä¸ªå¼€æœºè‡ªå¯åŠ¨çš„å°å·¥å…·ï¼Œç„¶åæƒ³å†™ä¸€ç¯‡markdownç¬”è®°ï¼Œç›´æ¥createï¼Œå°±è‡ªåŠ¨åœ¨ç½‘ç«™çš„`_posts`ç›®å½•ä¸‹åˆ›å»ºå¥½æ–‡ä»¶ï¼Œå¹¶ä¸”è°ƒç”¨typoraæ‰“å¼€ã€‚\n\n### æŠŠtyporaåŠ å…¥åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡\n\n![image-20210109154449024](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210109154449024.png)\n\nå…ˆç”¨`Everything`æœç´¢ä¸€ä¸‹`typora.exe`æ‰€åœ¨çš„ä½ç½®\n\n![image-20210109154604826](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210109154604826.png)\n\nè®¾ç½®å¥½ä¹‹åï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­å°±è¾“å…¥`typora`å°±å¯ä»¥æ‰“å¼€è¿™ä¸ªç¨‹åºã€‚å¦‚æœtyporaåé¢è·Ÿäº†markdownæ–‡ä»¶è·¯å¾„ï¼Œå°±å¯ä»¥ç›´æ¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ã€‚\n\n![image-20210109154824658](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210109154824658.png)\n\n### ä½¿ç”¨pythoné›†æˆè¿‡ç¨‹\n\né›†æˆè¿™ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠå„ç§å‘½ä»¤è¡Œæ“ä½œç®€åŒ–ä¸ºä¸€ä¸¤ä¸ªæŒ‰é’®ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```python\nimport os\nimport webbrowser\nimport PySimpleGUI as sg\nimport subprocess\n\nclass xxd:\n    '''\n    é›†æˆtyporaå’Œhexoçš„ä¸€ä¸ªå°å·¥å…·\n    å¯ä»¥å®ç°æœ¬åœ°è½»æ¾åˆ›å»ºmarkdown \n    ç„¶åè‡ªåŠ¨éƒ¨ç½²hexoç½‘ç«™\n    '''\n    def __init__(self, root_dir):\n        '''\n        root_dir: hexoç«™ç‚¹æ‰€åœ¨æ ¹ç›®å½•è·¯å¾„ \n        å¦‚ï¼š \"D:\\hexo\\blog\"\n        '''\n        self.dir = root_dir\n        # self.disk = self.dir[:2]  # å–ç›˜ç¬¦\n        self._posts = self.dir+'/source/_posts/'\n        self.p = []  # å­˜æ”¾å­è¿›ç¨‹\n        os.chdir(self.dir)\n    \n    def newPost(self, filename):\n        '''\n        filename: markdownæ–‡ä»¶åï¼Œ\n        è‹±æ–‡æˆ–æ•°å­—ç»„åˆ\n        '''\n        os.system(f'hexo new {filename}')\n        self.filepath = os.path.join(self._posts, filename+'.md')\n    \n    def typora(self):\n        '''\n        ç”¨typoraæ‰“å¼€æ–°å»ºçš„markdownæ–‡ä»¶\n        typora.exeéœ€è¦è¢«æ·»åŠ è¿›å…¥ç¯å¢ƒå˜é‡\n        '''\n        command = ['typora', self.filepath]\n        self.p.append(subprocess.Popen(command))\n    \n    def depoly(self):\n        os.system(f'hexo g && hexo d')\n\n\ndef the_gui(root_dir, site_url):\n    # åˆå§‹åŒ–wikiå¯¹è±¡\n    job = xxd(root_dir)\n\n    sg.theme('LightGrey3')\n    font = ('Arial', '11')\n\n    layout = [[sg.InputText(key='filename', size=(22, 1), font=('Arial', 16)),],\n              [sg.Button('Create', font=font), \n               sg.Button('Website', font=font), \n               sg.Button('Folder', font=font), \n               sg.Button('Depoly', font=font)],\n              ]\n    window = sg.Window('Log Tool', layout)\n\n    while True: \n        event, values = window.read()\n        if event is sg.WIN_CLOSED:\n            if len(job.p)>0:\n                for p in job.p:\n                    p.kill()\n            break\n        elif event == 'Create':\n            filename = values['filename']\n            if len(filename)>3:\n                job.newPost(filename)\n                job.typora()\n        elif event == 'Website':\n            webbrowser.open(site_url)\n        elif event == 'Folder':\n            os.startfile(job._posts)\n        elif event == 'Depoly':\n            job.depoly()\n    window.close()\n\nif __name__ == \"__main__\":\n    root_dir = r\"D:\\hexo\\blog\"\n    site_url = 'https://sheldonxxd.github.io/'\n    the_gui(root_dir, site_url)\n```\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›å‘½ä»¤æˆ‘è°ƒç”¨çš„`os.system`ï¼Œæœ‰ä¸€äº›åˆ™ä½¿ç”¨çš„`subprocess.Popen`ï¼Œä¸»è¦æ˜¯é˜²æ­¢é˜»å¡ã€‚\n\nç„¶åç”¨æˆ·è¦è‡ªå·±å®šä¹‰å¥½ç½‘ç«™çš„root_dirï¼Œä»¥åŠsite_urlã€‚\n\n### ç”¨æˆ·ç•Œé¢æ•ˆæœ\n\néå¸¸ç®€å•çš„ç”šè‡³å¯ä»¥è¯´ä¸‘é™‹çš„ç”¨æˆ·ç•Œé¢ï¼š\n\n![image-20210110060145381](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210110060145381.png)\n\nä½¿ç”¨æ–¹æ³•éå¸¸ç®€å•ï¼š\n\n1. æ–‡æœ¬æ¡†ä¸­è¾“å…¥markdownçš„æ–‡ä»¶åfilenameï¼Œä¸ç”¨å¸¦åç¼€ï¼Œç„¶åç‚¹å‡»`Create`ï¼Œåå°å°±ä¼šæ‰§è¡Œ`hexo new filename`å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„markdownï¼Œå¹¶è‡ªåŠ¨è°ƒç”¨typoraæ‰“å¼€è¿™ä¸ªæ–°å»ºçš„æ–‡æ¡£\n2. ç‚¹å‡»`Website`å¯ä»¥ç›´è¾¾ä½ çš„github pages\n3. ç‚¹å‡»`Folder`å¯ä»¥ç›´æ¥æ‰“å¼€`_posts`æ–‡ä»¶å¤¹ï¼Œæ–¹ä¾¿å¯¹ä¹‹å‰çš„markdownåšä¿®æ”¹\n4. ç‚¹å‡»`Depoly`ç›¸å½“äº`hexo g && hexo d`ï¼Œç”Ÿæˆæ–°çš„å†…å®¹å¹¶éƒ¨ç½²åˆ°github pages","tags":["gui","typora"],"categories":["python","blog"]},{"title":"äºŒå€¼åŒ–åºåˆ—é—´éš”é•¿åº¦ç»Ÿè®¡","url":"/2021/01/07/BinarySequenceIntervalCount/","content":"\nå‡å¦‚æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œèƒ½å¤Ÿéšæœºé—ªçƒå‘å…‰ï¼Œäº§ç”Ÿä¸€æ®µè„‰å†²ä¿¡å·è¢«æ£€æµ‹å™¨æ”¶é›†åˆ°ã€‚ç°åœ¨æŠŠä¿¡å·å¼ºåº¦åˆ†æˆhighå’Œlowä¸¤ç±»ï¼Œåˆ†åˆ«ç”¨1ï¼ˆONï¼‰å’Œ0ï¼ˆOFFï¼‰è¡¨ç¤ºã€‚æ¥ä¸‹æ¥éœ€è¦ç»Ÿè®¡åœ¨è¿™æ®µä¿¡å·åºåˆ—ä¸­ï¼Œ1å’Œ0æŒç»­ç‰‡æ®µçš„é•¿åº¦ã€‚è€Œä¸”è€ƒè™‘ä»ªå™¨å™ªå£°æ³¢åŠ¨ï¼Œéœ€è¦è®¾ç½®gapå‚æ•°ã€‚\n\n### æ ·æœ¬è¯´æ˜\n\næ¯”å¦‚å¯¹äºåºåˆ—`a`ï¼Œä¿¡å·ä½œå›¾æ˜¾ç¤ºå¦‚ä¸‹ï¼š\n\n![image-20210107121859054](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210107121859054.png)\n\nå…¶ä¿¡å·å€¼å¦‚ä¸‹ï¼š\n\n```\n0 0 0 0 0 1 0 1 1 1 0 0 0 0 1 1 0 0 0 0 0 0 1 1 1 0 0 1 1 1\n```\n\nå½“gap=0æ—¶ï¼Œè¿”å›å€¼ä¸ºï¼š\n\nON = [1, 3, 2, 3, 3]\n\nOFF = [5, 1, 4, 6, 2]\n\nå½“gap=1æ—¶ï¼Œè¿”å›å€¼ä¸ºï¼š\n\nON = [5, 2, 3, 3]\n\nOFF = [5, 4, 6, 2]\n\nâ€¦â€¦\n\næ£€éªŒç»“æœçš„æ—¶å€™ï¼ŒONå’ŒOFFæ±‚å’Œç­‰äºåºåˆ—çš„é•¿åº¦ï¼Œè€Œä¸”gap=1æ—¶ï¼ŒOFFä¸­ä¸ä¼šå‡ºç°å°äºç­‰äºgapçš„æ•°ã€‚\n\n### xxdçš„analyzeç®—æ³•\n\næ­¤ç®—æ³•éå¸¸ç®€å•ï¼Œä½†æ˜¯åªèƒ½ç»Ÿè®¡gap=0çš„æƒ…å†µã€‚\n\n```python\ndef analyze(labels):\n    '''\n    labelsæ˜¯ndarray, é‡Œé¢å¥½å¤šTrueå’ŒFasleå€¼\n    Trueä»£è¡¨ON, Falseä»£è¡¨OFF\n    å®ç°å¯¹çŠ¶æ€æŒç»­æ—¶é—´çš„ç»Ÿè®¡\n    '''\n    darks = []\n    ons = []\n    b, d = 0, 0\n    for idx, status in enumerate(labels):\n        if status>0:\n            b += 1\n            if d>0:\n                darks.append(d)\n            d = 0            \n        else:\n            d += 1\n            if b>0:\n                ons.append(b)\n            b = 0\n    ## å¾ªç¯ç»“æŸåæœ€åä¸€æ®µè¦è¿›è¡Œæ”¶é›†    \n    if d>0:\n        darks.append(d)\n    else:\n        ons.append(b)\n    # è¿”å›onæˆ–è€…dark timeçš„å‡å€¼\n    return ons, darks\n```\n\næµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š\n\n![image-20210107122525529](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210107122525529.png)\n\n### hwjçš„bi_countç®—æ³•\n\næ­¤ç®—æ³•é€»è¾‘ç•¥ä¸ºå¤æ‚ï¼Œä½†æ˜¯èƒ½ç»Ÿè®¡gap>0çš„æƒ…å†µã€‚\n\n```python\ndef bi_count(a, gap=1):\n    '''\n    Author: Wenjuan HU\n    Date: 2021-01-07\n    '''\n    count_0, count_1 = 0, 0\n    list_0 = []\n    list_1 = []\n    for i in range(len(a)):\n        if a[i] == 0:\n            count_0 += 1\n            if count_0 > gap and count_1 >0 :\n                list_1.append(count_1)\n                count_1 = 0\n        elif a[i] == 1:\n            count_1 += 1\n            if count_0 > gap:\n                list_0.append(count_0)\n                count_0 = 0\n            else:\n                count_1 += count_0\n                count_0 = 0\n    if count_0 > gap:\n        list_0.append(count_0)\n    else:\n        list_1[-1] = list_1[-1]+count_0\n    if count_1 > 0:\n        list_1.append(count_1)\n    return list_0, list_1\n```\n\næµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š\n\n![image-20210107122606314](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210107122606314.png)\n\n### å°ç»“\n\nè¿™æ˜¯ä¸€ä¸ªç¼–ç¨‹èƒ½åŠ›æµ‹è¯•çš„å¥½caseï¼Œåæ­£æˆ‘æ˜¯åšä¸å‡ºæ¥çš„å¼±é¸¡ï¼ˆif...elseä¸€å¤šå°±æ‡µé€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»å‘å¼ºå¤§çš„hwjå¥³å£«è‡´æ•¬ï¼ï¼ï¼","tags":["algorithm"],"categories":["python"]},{"title":"å®‰è£…å’Œè®¾ç½®HPç½‘ç»œæ‰“å°æœº","url":"/2021/01/06/installPrinter/","content":"\nå®éªŒå®¤æ‰“å°æœºè¿˜æ˜¯æœ‰çš„ï¼Œä¸è¿‡å¹³æ—¶æˆ‘ä¸»è¦åœ¨ç”µè„‘ä¸Šçœ‹æ–‡çŒ®ï¼Œæ‰€ä»¥ä½¿ç”¨çš„é¢‘ç‡éå¸¸ä½ã€‚æ°å·§ä»Šå¤©è¦æäº¤ä¸€äº›çº¸è´¨ææ–™ï¼Œä¸å¾—ä¸æ‰“å°å‡ºæ¥ã€‚ä¸€é—®ï¼Œå¤§å®¶éƒ½æ˜¯æŠ±ç€è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè·Ÿæ‰“å°æœºé€šè¿‡usbè¿æ¥å†æ‰“å°æ–‡ä»¶çš„ã€‚è€Œæˆ‘çš„ç”µè„‘åŒæ—¶è¿ç€ä¸¤ä¸ªç¡¬ç›˜ï¼Œå„ç§ç¨‹åºï¼ˆå¤„ç†ç¡¬ç›˜ä¸­çš„å®éªŒæ•°æ®ï¼‰å’Œæ–‡ä»¶éƒ½è¿˜æ‰“å¼€ç€ã€‚æ‰€ä»¥**æ¬ç”µè„‘**è¿™ç§äº‹æƒ…æˆ‘å¯å¹²ä¸æ¥ã€‚\n\nä¸ºäº†æ–¹ä¾¿è‡ªå·±æ–¹ä¾¿å¤§å®¶ï¼Œæˆ‘ä¾¿æŠŠæ‰“å°æœºè¿æ¥åˆ°äº†åŸºäºè‡ªå·±çš„è·¯ç”±å™¨æ¶è®¾çš„æ— çº¿å±€åŸŸç½‘ä¸­ï¼ˆprinteræ— æ³•è¿å•ä½çš„ä¼ä¸šWiFiï¼‰ã€‚ç„¶ååœ¨è·¯ç”±å™¨ä¸­è¿˜ç»™å®ƒåˆ†é…äº†å›ºå®šIPï¼š\n\n![image-20210106100103687](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106100103687.png)\n\næ¥ä¸‹æ¥å°±æ˜¯ç»™è‡ªå·±çš„ç”µè„‘å®‰è£…é©±åŠ¨ï¼Œå¹¶ä¸”è¿æ¥è¿™å°ç½‘ç»œæ‰“å°æœºã€‚ä¸ºæ­¤ï¼Œæˆ‘è¿˜å†™äº†ä¸€ä¸ªæ•™ç¨‹ã€‚\n\n### å®‰è£…æ‰“å°æœºé©±åŠ¨\n\nå»ºè®®ä½¿ç”¨windowsç³»ç»Ÿï¼ŒmacOSæˆ–linuxéœ€è¦ä¸‹è½½å¯¹åº”çš„é©±åŠ¨ç¨‹åºã€‚\n\nå…ˆå®‰è£…ç‰ˆæœ¬å‹å·åŒ¹é…çš„æ‰“å°æœºé©±åŠ¨ï¼š\n\n![image-20210106083943008](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106083943008.png)\n\nåœ¨å®‰è£…ç•Œé¢ä¸­ï¼Œéœ€è¦è¿æ¥åˆ°ç½‘ç»œæ‰“å°æœºï¼Œæˆ‘å·²ç»è®¾ç½®å¥½ç½‘ç»œï¼Œå¤§å®¶åŠ¡å¿…å…ˆè¿æ¥åˆ°`_gitlab_`è¿™ä¸ªWiFiï¼Œå¯†ç æ˜¯`fan123456`ã€‚**æ³¨æ„æ­¤WiFiä¸ºå±€åŸŸç½‘ï¼Œä¸èƒ½è®¿é—®å…¬ç½‘ï¼Œ**ä½†å¯ä»¥è®¿é—®å†…éƒ¨gitlabç½‘ç«™ï¼ˆhttp://192.168.0.80ï¼‰\n\n> å¤¹å¸¦äº†ç§è´§ã€‚gitlabæ˜¯æˆ‘æ¶è®¾åœ¨ä¸€å°ubuntuä¸»æœºä¸Šçš„ä¸œä¸œï¼Œæˆ‘è§‰å¾—å¯¹äºå®éªŒå®¤å†…éƒ¨è€Œè¨€ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªååŒå’Œç‰ˆæœ¬æ§åˆ¶çš„å·¥å…·è¿˜è›®å¥½çš„ã€‚\n\n![image-20210106084204281](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106084204281.png)\n\nç„¶ååœ¨é©±åŠ¨å®‰è£…ç•Œé¢è¾“å…¥æ‰“å°æœºçš„IPåœ°å€`192.168.0.188`\n\n![image-20210106084251923](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106084251923.png)\n\né©¬ä¸Šå°±èƒ½æœç´¢åˆ°è¿™å°æ‰“å°æœºçš„ä¿¡æ¯ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ç»§ç»­å®‰è£…å’Œé…ç½®ï¼ˆéœ€è¦ä¸€ç‚¹æ—¶é—´ï¼‰ã€‚\n\n![image-20210106084320075](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106084320075.png)\n\næœ€åæ˜¾ç¤ºæ‰“å°æœºå®‰è£…æˆåŠŸç•Œé¢ï¼š\n\n![image-20210106084722170](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106084722170.png)\n\nç›´æ¥ç‚¹å‡»`å®Œæˆ`ï¼Œå¹¶æ‰“å°æµ‹è¯•é¡µã€‚å¦‚æœæ²¡æœ‰æˆåŠŸï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç³»ç»Ÿæ˜¯å¦è‡ªåŠ¨æ–­å¼€äº†æ²¡æœ‰ç½‘ç»œè¿æ¥çš„`_gitlab_`çš„WiFiã€‚\n\n### è®¾ç½®åŒé¢æ‰“å°\n\nå…·ä½“å‚è€ƒã€Š[æƒ æ™®æ‰“å°æœºåŒé¢æ‰“å°è‡ªåŠ¨å˜æ‰‹åŠ¨çš„è§£å†³åŠæ³•](https://www.jb51.net/hardware/other/313421.html)ã€‹ï¼Œå¯¹æ‰“å°æœºçš„å±æ€§è¿›è¡Œä¿®æ”¹ï¼š\n\n![image-20210106085902856](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106085902856.png)\n\nç„¶åä¿®æ”¹æ‰“å°æœºé¦–é€‰é¡¹ï¼Œä¸ºäº†ç»æµç¯ä¿ï¼Œé»˜è®¤åŒé¢æ‰“å°ï¼š\n\n![image-20210106090109404](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106090109404.png)\n\n### Wordæ–‡æ¡£æ‰“å°æ•ˆæœ\n\nç„¶åéšä¾¿æ‰“å°ä¸€ä¸ªwordæ–‡æ¡£ï¼ŒæŒ‰`Ctrl+P`ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°æœºé»˜è®¤é…ç½®å°±æ˜¯åŒé¢æ‰“å°äº†ï¼š\n\n![image-20210106090248311](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106090248311.png)\n\n### å°ç»“\n\nç„¶åæˆ‘æŠŠæ•™ç¨‹å‘å¸ƒåˆ°å¾®ä¿¡ç¾¤ï¼Œè®©å¤§å®¶æ‰“å°ä¸œè¥¿èƒ½å¤Ÿæ–¹ä¾¿ä¸€ç‚¹ï¼Œè·å¾—ç‚¹èµä¸è®¡å…¶æ•°ï¼Œé‚£æˆ‘ä¹Ÿæ„Ÿè§‰è›®å¼€å¿ƒçš„ã€‚\n\n![image-20210106100712376](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210106100712376.png)\n\nå®‰è£…é…ç½®ç½‘ç»œæ‰“å°æœºè¿™ç§äº‹æƒ…ï¼Œå…¶å®éå¸¸ç®€å•ã€‚ä½†æ˜¯å®ƒèƒ½å¤ŸæœåŠ¡åˆ°çš„äººä¹Ÿæ˜¯æœ€å¤šçš„ã€‚è€Œæˆ‘å†™çš„å¯èƒ½è‡ªé¸£å¾—æ„çš„ä»£ç ï¼Œåå€’æ˜¯æ— äººé—®æ´¥æœ€å¤šæˆ‘è€å©†å–Š666ã€‚å½“ç„¶äº†æˆ‘ä¹Ÿå¹¶ä¸è¿½æ±‚å¤šäººé—®æ´¥ï¼Œèƒ½è‡ªé¸£å¾—æ„è‡ªå¨±è‡ªä¹ä¹Ÿæ˜¯ä¸é”™çš„ã€‚å…³é”®æ˜¯è¯´ä¸€å®šè¦æŠ“ä½çœŸæ­£çš„éœ€æ±‚ï¼ˆä¸ç®¡æ˜¯è‡ªå·±çš„è¿˜æ˜¯å®¢æˆ·çš„ï¼‰ï¼Œæ‰èƒ½åšå‡ºåˆ›é€ å¤§é‡ä»·å€¼çš„äº‹æƒ…ï¼Œä»è€Œè·å¾—æ»¡è¶³æ„Ÿå’Œå¹¸ç¦æ„Ÿã€‚","tags":["æ‰“å°æœº","éœ€æ±‚"],"categories":["blog"]},{"title":"è·å–ç›´æ–¹åˆ†å¸ƒæ˜¯å¦‚æ­¤çš„ç®€å•","url":"/2021/01/05/easy-histogram/","content":"\næŸ¥çœ‹ä¸€åˆ—æ•°æ®çš„ç›´æ–¹åˆ†å¸ƒæ˜¯ç»Ÿè®¡é‡Œè¾¹æœ€åŸºæœ¬çš„æ“ä½œäº†ï¼Œè¿‡å»æˆ‘å¸¸å¸¸ä½¿ç”¨seabornä½œç›´æ–¹åˆ†å¸ƒå›¾ï¼Œå®ƒä¼šè¿›è¡Œè‡ªåŠ¨çš„æ ¸å¯†åº¦ä¼°è®¡ï¼Œä½†æ˜¯æˆ‘å½“æˆ‘æƒ³æ‹¿åˆ°ä¸€ä¸ªç®€å•çš„histogramçš„æ•°æ®çš„æ—¶å€™ï¼Œå¸¸å¸¸è¿˜éœ€è¦è‡ªå·±ä½¿ç”¨`collections.Counter`å…ˆæ¥è®¡æ•°ä¸€ä¸‹ã€‚ç›´åˆ°ä»Šå¤©ï¼Œæˆ‘ä½¿ç”¨`plt.hist`å‘½ä»¤å·æ‡’ï¼Œå‘ç°äº†ä¸€äº›ç«¯å€ªï¼š\n\n![image-20210105192718893](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105192718893.png)\n\næ³¨æ„ï¼Œjupyter notebook ä¸­outputçš„å†…å®¹ï¼Œé™¤äº†æœ‰figureä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªtupleï¼Œçœ‹ä¸Šå»`plt.hist`å‘½ä»¤å¯ä»¥è¿”å›ç›´æ–¹åˆ†å¸ƒæŸ±çŠ¶å›¾çš„ä½œå›¾æ•°æ®ã€‚å¦‚æœå‹¤å¿«ç‚¹åŠ ä¸Š`plt.show`ï¼Œå°±çœ‹ä¸åˆ°äº†ï¼š\n\n![image-20210105192912328](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105192912328.png)\n\n### plt.histçš„è¿”å›å€¼å°±æ˜¯ç›´æ–¹åˆ†å¸ƒç»Ÿè®¡æ•°æ®\n\nä¸è¿‡æˆ‘è¿˜æ˜¯ç”¨ä¸€ä¸ªå˜é‡æ¥æ”¶äº†`plt.hist`å‘½ä»¤çš„è¿”å›ï¼Œè½»è€Œæ˜“ä¸¾å°±æ‹¿åˆ°äº†ç›´æ–¹åˆ†å¸ƒçš„ç»Ÿè®¡æ•°æ®ï¼Œåç»­è‡ªå·±æƒ³æ€ä¹ˆä½œå›¾å°±æ€ä¹ˆä½œå›¾ï¼š\n\n![image-20210105193018138](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105193018138.png)\n\n### é€šè¿‡binså’Œrangeå‚æ•°æ§åˆ¶ç›´æ–¹åˆ†å¸ƒç»Ÿè®¡\n\nä¸è¿‡ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œç›´æ–¹åˆ†å¸ƒçš„åˆ†ç»„è¾¹ç•Œæ˜¯å‡Œä¹±çš„ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡è®¾ç½®binså’Œrangeå‚æ•°æ¥æ§åˆ¶ï¼š\n\n![image-20210105193503927](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105193503927.png)\n\n### ç›´æ¥æŠŠé¢‘æ¬¡æ¢ç®—æˆåˆ†å¸ƒæ¦‚ç‡å¯†åº¦\n\né€šè¿‡`?plt.hist`å¯ä»¥åœ¨jupyter notebookä¸­å¿«é€ŸæŸ¥çœ‹è¯¥å‡½æ•°çš„æ–‡æ¡£ï¼Œç«‹é©¬å¾—çŸ¥å¯ä»¥é€šè¿‡densityè¿™ä¸ªå‚æ•°ï¼Œé€‰æ‹©è¾“å‡ºåˆ†å¸ƒå¯†åº¦ï¼Œç›¸å½“äºåšäº†ä¸€ä¸ªå½’ä¸€åŒ–ï¼Œä½¿å¾—ä¸åŒæ•°é‡çš„æ ·æœ¬ä¹‹é—´å…·å¤‡æ›´å¥½çš„å¯æ¯”æ€§ã€‚\n\n![image-20210105193937326](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105193937326.png)\n\n### æŸ¥çœ‹ç´¯ç§¯é¢‘ç‡\n\n![image-20210105194511640](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105194511640.png)\n\nåªè¦åœ¨å‚æ•°é‡Œè¾¹ä¿®æ”¹cumulativeä¸º`True`ï¼Œå°±å¯ä»¥è¾“å‡ºä¸€ä¸ªç´¯ç§¯é¢‘ç‡åˆ†å¸ƒã€‚è¿™æ¯”æˆ‘è¿™ä¸¤å¤©ç±»ä¼¼ç´¯æ´»å¯è¦è½»æ¾å¤šäº†ã€‚\n\n### ç»˜åˆ¶å¸•ç´¯æ‰˜å›¾\n\nç„¶åæˆ‘æƒ³æŠŠç´¯ç§¯é¢‘ç‡ç»˜åˆ¶æˆæŠ˜çº¿ï¼Œä¸‹è¾¹æ”¾åˆ†å¸ƒï¼Œç»“æœå¦‚ä¸‹ï¼š\n\n![image-20210105194913469](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105194913469.png)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œaæ˜¯å‰è¾¹`plt.hist`å‘½ä»¤çš„è¿”å›å€¼ï¼Œç´¢å¼•ä¸º1æ‰å¯¹åº”æ¨ªåæ ‡ï¼Œè€Œä¸”`len(a[1])` æ¯”` len(a[0])` å¤§ 1ï¼Œå› ä¸º`a[1]` å­˜æ”¾çš„æ˜¯è¾¹ç•Œï¼Œæ‰€ä»¥æˆ‘å¯¹è¿™ä¸ªarrayè¿›è¡Œäº†åˆ‡ç‰‡ï¼Œè€Œä¸”è¿˜ç§»ä½ã€‚\n\n### å°ç»“\n\næˆ‘å†ä¹Ÿä¸ç”¨Counteräº†ï¼Œå†ä¹Ÿä¸ç”¨dataframeçš„`.cumsum()`äº†ï¼Œä½¿ç”¨plt.histä¸èƒ½å†æ–¹ä¾¿ã€‚æ„Ÿè§‰åƒæ˜¯æ‰“é€šäº†ä»»ç£äºŒè„‰ã€‚matplotlibè¿™ä¸ªåº“ç¡®å®æ˜¯ğŸ‚ğŸºï¼","tags":["histogram","matplotlib"],"categories":["python"]},{"title":"æˆ‘ä¸ºä½•ä»ImageJè½¬å‘python","url":"/2021/01/05/myCodingHistory/","content":"\nImageJæ˜¯å­¦æœ¯ç•Œéå¸¸å¸¸ç”¨çš„å›¾åƒå¤„ç†è½¯ä»¶ã€‚å®ƒæ’ä»¶ä¸°å¯Œï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½“ç§¯å°å·§ï¼Œå¼€æºè·¨å¹³å°ï¼Œæˆ‘åœ¨è¯»åšå£«åˆšå¼€å§‹çš„æ—¶å€™ï¼Œä¸»è¦å°±æ˜¯ç”¨å®ƒè§£å†³ä¸€äº›æˆåƒæ•°æ®åˆ†æçš„é—®é¢˜ã€‚å¯æ˜¯åˆ°åæ¥ï¼Œéœ€è¦å¤„ç†çš„æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œå¯¹è‡ªåŠ¨åŒ–çš„éœ€æ±‚è¶Šæ¥è¶Šé«˜ï¼ŒImageJçš„å®è¯­è¨€ï¼ˆMacro Languageï¼‰å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä¾¿é€æ­¥è¿ˆå…¥äº†pythonçš„æ·±å‘ã€‚ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä½œä¸ºæˆ‘è¿™ç§è½¬å‹çš„è§è¯ã€‚\n\n### éœ€æ±‚\n\næœ‰ä¸€ä¸ªè§†é¢‘æ•°æ®ï¼ˆxytï¼‰ï¼Œæ¯ä¸€å¸§éƒ½æœ‰ä¸€äº›å•åˆ†å­è§å…‰ä¿¡å·ï¼Œéœ€è¦æå–å®ƒä»¬çš„ä½ç½®ï¼ˆxp, ypï¼‰ï¼Œç„¶åå†æå–è¯¥ä½ç½®çš„å¼ºåº¦æ—¶é—´æ›²çº¿è¿›è¡Œåˆ†æã€‚\n\n### ImageJ Macroçš„ä»£ç å®ç°\n\n```javascript\n/*\n * 2021-1-4\n * # batch find maxima and export the list\n */\n\n h = 750;  // å…ˆè‡ªè¡Œç”¨Find Maximaè°ƒèŠ‚å‚æ•°é¢„è§ˆä¸€ä¸‹ï¼Œé€‰æ‹©åˆé€‚çš„æ•°å€¼\n\n // æŠŠè®°å½•æ–‡ä»¶å­˜æ”¾å­ç›®å½•ä¸‹ï¼Œ\n // å¦‚æœå­æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª\n image= getTitle();\n imageName = split(image, \".\");\n fpath = getDirectory(\"image\")+imageName[0]+\"_frames/\";\n if (!File.exists(fpath)){\n \tFile.makeDirectory(fpath);\n }  \n \n N = nSlices;\n setBatchMode(\"hide\");  // ä½¿ç”¨batchmodeç¨å¾®å¿«ä¸€ç‚¹\n for (i = 0; i < N; i++) {\n \t// main(fpath, i);\n \tmain2(i);\n }\n setBatchMode(\"show\");\n\n roiManager(\"save\", fpath+\"RoiSet.zip\");\n // æŠŠroiç®¡ç†å™¨ä¸­çš„è®°å½•æ‰“åŒ…ä¿å­˜\n // åç»­å¯ä»¥ä½¿ç”¨pythonä¸­çš„read_roiæ¨¡å—è¿›è¡Œå¤„ç†\n\n function main(fpath, i){\n \t// å¯¹æ¯ä¸€å¸§è¿›è¡ŒFind Maximaå¤„ç†ï¼Œ\n \t// è¾“å‡ºListåˆ°Resultsçª—å£\n \t// æŠŠResultsçª—å£å†…å®¹ä¿å­˜ä¸ºcsvï¼Œå‘½åä¸ºframe/id.csv\n \tframeID = i+1;\n \tsetSlice(frameID);\n \trun(\"Find Maxima...\", \"prominence=750 output=List\");\n \tsaveAs(\"results\", fpath+frameID+\".csv\");\n// \tselectWindow(\"Results\");\n// \trun(\"Close\");\n//  ä¸ç”¨å…³ï¼Œæ¯æ¬¡éƒ½ä¼šåˆ·æ–°Resultsçª—å£\n }\n\n function main2(i){\n \t// å¯¹æ¯ä¸€å¸§è¿›è¡ŒFind Maximaå¤„ç†ï¼Œ\n \t// è¾“å‡ºListåˆ°Resultsçª—å£\n \t// æŠŠResultsçª—å£å†…å®¹ä¿å­˜ä¸ºcsvï¼Œå‘½åä¸ºframe/id.csv\n \tframeID = i+1;\n \tsetSlice(frameID);\n \trun(\"Find Maxima...\", \"prominence=750 output=[Point Selection]\");\n \troiManager(\"Add\");\n \t// ä½¿ç”¨ROIç®¡ç†å™¨ä¿å­˜æ•°æ®ï¼Œå‡å°‘IOï¼Œé€Ÿåº¦å¿«ä¸Šå¥½å‡ å€\n \trun(\"Select None\");\n }\n```\n\nä»¥ä¸Šä»£ç ï¼Œåªæ˜¯å¾ªç¯è°ƒç”¨ImageJè‡ªå¸¦çš„`Find_Maxima`åŠŸèƒ½ï¼Œåˆšå¼€å§‹æˆ‘æ˜¯æ‰“ç®—è¾“å‡ºåˆ°Resultsçª—å£ï¼Œç„¶åä¿å­˜æ¯ä¸€å¸§çš„ç»“æœåˆ°csvæ–‡ä»¶ï¼Œç»“æœå‘ç°è¿™æ ·å¤ªæ…¢äº†ï¼ˆå¤§æ¦‚9åˆ†é’Ÿï¼‰ã€‚åæ¥å†³å®šæŠŠç»“æœä¿å­˜åˆ°ROIç®¡ç†å™¨ï¼Œèƒ½å¤Ÿç¨å¾®åŠ é€Ÿä¸€ç‚¹ï¼ˆå¤§æ¦‚4åˆ†é’Ÿï¼‰ã€‚ä½†æ˜¯å³ä¾¿è¿™ä¹ˆå¤§æ®µçš„ä»£ç ï¼Œä¹Ÿåªä¸è¿‡å®ç°äº†ä½ç½®ä¿¡æ¯çš„æ”¶é›†ï¼Œè¿˜æ²¡åŠæ³•å®ç°å¼ºåº¦æ—¶é—´æ›²çº¿çš„æå–ã€æ•´ç†æ±‡æ€»å’Œå¯è§†åŒ–ã€‚è€Œä¸”ä¿å­˜ä¸ºroiï¼Œåç»­è¿˜å¾—`pip install read_roi`ï¼Œåˆ©ç”¨pythonè„šæœ¬è¿›è¡Œåç»­çš„å¤„ç†ã€‚\n\n### pythonçš„ä»£ç å®ç°\n\nä¸»è¦ä¾èµ–`skimage.io`å®ç°è§†é¢‘æ•°æ®çš„è¯»å–ï¼Œ`skimage.morphology.h_maxima`å®ç°**Find_Maxima**çš„åŠŸèƒ½ã€‚ä¸ºäº†å­¦ä¹ å†™ç±»ï¼Œæˆ‘æŠŠå‡ ä¸ªå¤§æ­¥éª¤éƒ½å†™æˆäº†ç±»ï¼š\n\n1. é¦–å…ˆæ˜¯è¯»å–æ•°æ®ï¼ŒsmFRET\n2. ç„¶åæ˜¯Find_Maximaï¼Œfinder\n3. æ¥ç€å°±æ˜¯è¦æŠŠæ‰¾åˆ°çš„maximaå¯¹åº”ä½ç½®çš„å¼ºåº¦æ—¶é—´æ›²çº¿æå–å‡ºæ¥ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªextractor\n\n```python\nfrom skimage import io\nfrom skimage.morphology import h_maxima\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nclass smFRET():\n    def __init__(self, filepath):\n        self.filepath = filepath\n        self.movie = io.imread(filepath, plugin='pil')\n        self.frames, self.width, self.height = self.movie.shape\n\n        \nclass finder(smFRET):\n    def __init__(self, filepath):\n        super(finder, self).__init__(filepath)\n    \n    def run(self, h):\n        '''\n        hè¿™ä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨ImageJé¢„è§ˆmovieï¼Œç”¨`Find_Maxima`å‘½ä»¤è·å–\n        '''\n        self.maxima = []\n        # movieæ•´ä½“å¤ªå¤§ï¼Œä¸€æ¬¡æ€§å¤„ç†ä¼šå‡ºå†…å­˜é—®é¢˜ï¼Œæ‰€ä»¥æŒ‰å¸§æ‰«æ\n        for frame in self.movie:\n            self.maxima.append(h_maxima(frame, h))\n        self.maxima = np.array(self.maxima)\n        self.mapping = self.projection()\n    \n    def projection(self):\n        '''\n        åšä¸€ä¸ªzè½´çš„projection\n        '''\n        return self.maxima.sum(axis=0)\n\n    \nclass extractor(finder):\n    def __init__(self, filepath, h):\n        '''\n        filepath: tifè§†é¢‘æ–‡ä»¶è·¯å¾„\n        h: è¿™ä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨ImageJé¢„è§ˆmovieï¼Œç”¨`Find_Maxima`å‘½ä»¤è·å–\n        '''\n        super(extractor, self).__init__(filepath)\n        self.run(h)\n        \n    def preview(self, vmax=100, vmin=4):\n        plt.imshow(self.mapping, vmax=vmax, vmin=vmin, cmap=\"jet\")\n        plt.colorbar()\n        plt.show()\n        \n    def threshold(self, vmax, vmin):\n        '''\n        æ ¹æ®find.mappingçš„é¢„è§ˆç»“æœè®¾å®švmaxå’Œvminä½œä¸ºthreshold\n        '''\n        # è¦è½¬åŒ–ä¸ºfloatæ‰èƒ½åšbroadcastè®¡ç®—\n        mm = self.mapping.astype(\"float32\")  \n        rows, cols = np.where((mm-vmin)*(mm-vmax)<=0)\n        self.locs = np.vstack([rows, cols]).T\n    \n    def choose(self, pid, show=False):\n        '''\n        pid: å•åˆ†å­ä¿¡å·çš„ç´¢å¼•ï¼Œä»0å¼€å§‹ï¼Œä¸å¤§äºself.locsçš„é•¿åº¦\n        '''\n        row, col = self.locs[pid]\n        line = self.movie[:, row, col]\n        labels = self.maxima[:, row, col]*line.ptp()/10+line.mean()\n        # æŠŠmaximaçš„labelä¹Ÿæå–å‡ºæ¥ï¼Œçœ‹çœ‹å•¥æƒ…å†µ\n        if show:\n            plt.plot(line)\n            plt.plot(labels, c='r')\n            plt.show()\n        return line, self.maxima[:, row, col]\n```\n\nä¸¥æ ¼æ¥è¯´ï¼Œæˆ‘è¿™ä»£ç å†™å¾—å¹¶ä¸æ¼‚äº®ï¼Œå› ä¸ºæˆ‘å¹³æ—¶å¾ˆå¤šæ—¶å€™éƒ½æ˜¯å†™é›¶æ•£çš„é¢å‘è¿‡ç¨‹çš„ä»£ç ï¼Œé¢å‘å¯¹è±¡å¹¶ä¸æ˜¯æˆ‘ç†Ÿæ‚‰çš„é¢†åŸŸã€‚ä¸è¿‡æˆ‘å–œæ¬¢ä¸€ä¸ªå¯¹è±¡å¯ä»¥ä¿ç•™å¾ˆå¤šæ•°æ®å’Œæ–¹æ³•ï¼Œè¿˜èƒ½å¤Ÿç»§æ‰¿çš„ç‰¹ç‚¹ã€‚æ‰€ä»¥åœ¨ä¸€äº›heavyçš„åœºåˆï¼Œæˆ‘ä¹Ÿä¼šä½¿ç”¨ã€‚è€Œä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼š\n\n```python\next = extractor(filepath, h=1000)\next.preview(vmax=100, vmin=4)\n# å¯ä»¥å…ˆçœ‹åˆ°å®šä½çš„ç»“æœï¼Œæ‰¾åˆ°åˆé€‚çš„vmaxå’Œvminä½œä¸ºåç»­çš„threshold\n```\n\n![image-20210105182125942](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105182125942.png)\n\n```python\next.threshold(vmax=100, vmin=4)\nline,labels = ext.choose(30, show=True)\n```\n\n![image-20210105182112769](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105182112769.png)\n\nä½¿ç”¨pythonä»£ç ï¼Œåªéœ€è¦1åˆ†40ç§’å°±å¯ä»¥å®Œæˆä»»åŠ¡ï¼ˆäº‹å®ä¸Šæ–‡ä»¶è¯»å–å’Œfinderè¿™ä¸¤éƒ¨åˆ†é‡‡å–å¤šè¿›ç¨‹å¤šçº¿ç¨‹ç”šè‡³numbaï¼Œè¿˜èƒ½å¤§å¹…æé€Ÿï¼‰ï¼Œè€Œä¸”æ‰€æœ‰æŠ½æå‡ºæ¥çš„åæ ‡ä¿¡æ¯éƒ½åœ¨extå¯¹è±¡ä¸­ä¿å­˜ç€ï¼Œæƒ³çœ‹å“ªä¸ªï¼Œå°±å¯ä»¥ä½¿ç”¨chooseçš„æ–¹æ³•å–å€¼å¹¶æŸ¥çœ‹å¼ºåº¦æ—¶é—´æ›²çº¿å’Œå¯¹åº”çš„labelã€‚\n\n### å°ç»“\n\nImageJçš„Macro Languageæ˜¯æˆ‘ç¬¬ä¸€ä¸ªæˆåŠŸåº”ç”¨å¹¶è§£å†³äº†ç§‘ç ”ä¸Šå®é™…é—®é¢˜çš„ç¼–ç¨‹è¯­è¨€ï¼Œè®©æˆ‘å°åˆ°äº†ä½¿ç”¨ç¼–ç¨‹æ¥é«˜æ•ˆè§£å†³ä¸€äº›laboriousçš„å›¾åƒæ•°æ®åˆ†æå·¥ä½œçš„ç”œå¤´ï¼ŒåŒæ—¶ä¹Ÿè®©æˆ‘æ ‘ç«‹äº†ä¸€äº›è‡ªä¿¡å¿ƒã€‚ä½†æ˜¯å®ƒæ¯•ç«Ÿè¿‡äºç®€å•ï¼Œéš¾ä»¥èƒœä»»æ›´å¤šæ›´å¤æ‚çš„ä»»åŠ¡ã€‚è™½ç„¶æˆ‘ç°åœ¨å·²ç»å¾ˆå°‘ä½¿ç”¨ImageJäº†ï¼Œä½†æ˜¯å¯¹å®ƒä»¥åŠèƒŒåæˆåƒä¸Šä¸‡çš„å¼€å‘è€…ï¼Œæˆ‘æŠ¥ä»¥å´‡é«˜çš„æ•¬æ„ã€‚","tags":["summary"],"categories":["python","ImageJ"]},{"title":"å•é¢—ç²’ç²’å­å…‰æ–‘çš„é«˜æ–¯æ‹Ÿåˆ","url":"/2021/01/05/GaussianFit-2D/","content":"\nåƒPALMã€STORMç­‰è¶…åˆ†è¾¨è§å…‰æˆåƒï¼Œéƒ½æ˜¯åŸºäºå•åˆ†å­å®šä½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå•åˆ†å­çš„è§å…‰æˆåƒåœ¨xyå¹³é¢ä¸Šè¿‘ä¼¼é«˜æ–¯åˆ†å¸ƒï¼ˆæœ‰å…´è¶£å¯äº†è§£ç‚¹æ‰©æ•£å‡½æ•°ï¼‰ï¼Œå¯ä»¥ç”¨é«˜æ–¯æ‹Ÿåˆå¾—åˆ°å•åˆ†å­çš„ç²¾ç¡®å®šä½ä¿¡æ¯ï¼Œä»è€Œçªç ´å…‰å­¦è¡å°„æé™ã€‚è¿™é‡Œå°±å°è¯•ä½¿ç”¨pythonå¯¹äºŒç»´ç²’å­å…‰æ–‘å®ç°é«˜æ–¯æ‹Ÿåˆã€‚\n\n### ç²’å­å…‰æ–‘å›¾åƒ\n\n![image-20210105082931680](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105082931680.png)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘æ¨¡æ‹Ÿäº†ä¸¤ä¸ªåœ†å½¢ç²’å­å…‰æ–‘ï¼Œå·¦è¾¹çš„ä¸­å¿ƒåæ ‡æ˜¯`(3, 3)`ï¼Œå³è¾¹çš„æ˜¯`(3.2, 2.9)`ï¼Œç›¸å½“äºæœ‰`0.22`ä¸ªåƒç´ çš„åç§»ï¼ˆè‹¥æ¯ä¸ªåƒç´ 160 nmï¼Œå®é™…åç§»çº¦35 nmï¼‰ï¼Œåæ˜ åœ¨ç²’å­å…‰æ–‘ä¸Šï¼Œå°±æ˜¯ç®­å¤´æ‰€æŒ‡çš„åƒç´ å—ç¨å¾®äº®åº¦æé«˜äº†ä¸€äº›ã€‚æœ‰äº†è¿™æ ·ä¸€ä¸ªç›´è§‚çš„æ„Ÿå—ï¼Œæ¥ä¸‹æ¥å°±çœ‹çœ‹å¦‚ä½•æ„é€ ä¸€ä¸ªé«˜æ–¯å…‰æ–‘ã€‚\n\n### äºŒç»´é«˜æ–¯å…‰æ–‘çš„æ„é€ \n\nä»£ç æˆ‘æ˜¯ç›´æ¥ä»[stackOverflow](https://stackoverflow.com/questions/21566379/fitting-a-2d-gaussian-function-using-scipy-optimize-curve-fit-valueerror-and-m)ä¸ŠæŠ„æ¥ï¼Œç¨å¾®å¢åŠ äº†ä¸€äº›æ³¨é‡Šï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n```python\nimport numpy as np\n\ndef twoD_Gaussian(meshgrid, amplitude, xo, yo, sigma_x, sigma_y, theta, offset):\n    '''\n    meshgrid: åŒ…å«xå’Œyï¼Œèƒ½å¤Ÿè¡¨ç¤ºç½‘æ ¼æ‰€æœ‰çš„ç´¢å¼•(i,j)\n    xo, yo: é«˜æ–¯åˆ†å¸ƒçš„ä¸­å¿ƒä½ç½® \n    amplitude: é«˜æ–¯åˆ†å¸ƒçš„æœ€å¤§å¼ºåº¦\n    sigma_x, sigma_y: å½±å“é«˜æ–¯å…‰æ–‘çš„é•¿å®½\n    theta: æ§åˆ¶è§’åº¦ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ¤­åœ†ï¼Œæ•°å€¼èŒƒå›´0-PI\n    offset: è¡¥å¿å€¼ï¼Œå¯ä»¥ä½¿æ‰€æœ‰çš„æ•°å€¼éƒ½æ˜¯æ­£æ•°\n    '''\n    x, y = meshgrid\n    xo = float(xo)\n    yo = float(yo)    \n    a = (np.cos(theta)**2)/(2*sigma_x**2) + (np.sin(theta)**2)/(2*sigma_y**2)\n    b = -(np.sin(2*theta))/(4*sigma_x**2) + (np.sin(2*theta))/(4*sigma_y**2)\n    c = (np.sin(theta)**2)/(2*sigma_x**2) + (np.cos(theta)**2)/(2*sigma_y**2)\n    g = offset + amplitude*np.exp( - (a*((x-xo)**2) + 2*b*(x-xo)*(y-yo) \n                            + c*((y-yo)**2)))\n    # æ³¨æ„è¿”å›å€¼æœ€å¥½è¦ravelï¼Œä¸ç„¶curve_fitä¼šæŠ¥é”™\n    return g.ravel()\n```\n\næœ‰äº†è¿™æ ·ä¸€ä¸ªæ ‡å‡†çš„æ„é€ å‡½æ•°ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨`curve_fit`å¯¹å·²æœ‰çš„æ•°æ®è¿›è¡Œæ‹Ÿåˆï¼Œåè¿‡æ¥ä¼°è®¡è¿™ä¸ªå‡½æ•°ä¸­ä¸€äº›å‚æ•°ï¼Œå…¶ä¸­å°±åŒ…æ‹¬é«˜æ–¯åˆ†å¸ƒä¸­å¿ƒçš„ä½ç½®`(xo, yo)`ã€‚\n\n### ç²’å­å…‰æ–‘çš„é«˜æ–¯æ‹Ÿåˆ\n\n```python\nfrom scipy.optimize import curve_fit\n\n# Create x and y indices\nx = np.linspace(0, 6, 7)\ny = np.linspace(0, 6, 7)\nx, y = np.meshgrid(x, y)  # meshgridç”Ÿæˆäº†ä¸€æ•´å¼ ç´¢å¼•map\n#create data\ndata = twoD_Gaussian((x, y), 10, 3, 3, 2, 2, 0, 10)\n# add some noise to the data and try to fit the data generated beforehand\ninitial_guess = (10, 3, 3, 2, 2, 0, 10)\ndata_noisy = data + 0.2*np.random.normal(size=data.shape)\n# æ–¹ä¾¿èµ·è§ï¼Œæ„é€ ä¸€ä¸ªå¸¦å™ªå£°çš„æ•°æ®\n\npopt, pcov = curve_fit(twoD_Gaussian, (x, y), data_noisy, p0=initial_guess) \n# éœ€è¦æ‹Ÿåˆçš„å‚æ•°ç›´æ¥å…¨éƒ¨å°±æ”¾åˆ°p0å»äº†\n```\n\nç„¶åæŸ¥çœ‹poptä¸­çš„ç»“æœï¼š\n\n![image-20210105084727546](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210105084727546.png)\n\nå¯ä»¥çœ‹åˆ°ï¼ŒåŠ å…¥å™ªå£°ååšé«˜æ–¯æ‹Ÿåˆï¼Œä¼°è®¡çš„å‚æ•°`xo = 3.249`ï¼Œ`yo = 2.916`ï¼Œè·Ÿå‰é¢`(3.2, 2.9)`åˆæœ‰å¾®å°çš„å·®å¼‚ï¼ˆå¤§æ¦‚5-8ä¸ª nmçš„åç§»ï¼‰ï¼Œæ‰€ä»¥è¯´ï¼Œå•åˆ†å­å®šä½ç²¾åº¦ç¦»ä¸å¼€éå¸¸å¥½çš„ä¿¡å·è´¨é‡ã€‚\n\n","tags":["gauss","fit"],"categories":["python"]},{"title":"ç´¯ç§¯åˆ†å¸ƒå‡½æ•°å’ŒSå‹æ›²çº¿æ‹Ÿåˆ","url":"/2021/01/04/cdf/","content":"\næŸ¥çœ‹æ•°æ®åˆ†å¸ƒæƒ…å†µï¼Œä»¥åŠä½¿ç”¨ç‰¹å®šçš„å‡½æ•°æ¨¡å‹å¯¹å·²è§‚æµ‹çš„æ•°æ®è¿›è¡Œæ‹Ÿåˆæ˜¯éå¸¸å¸¸è§çš„æ“ä½œã€‚è¿™é‡Œä»æ­£æ€åˆ†å¸ƒå…¥æ‰‹ï¼Œåˆ°åº”ç”¨**Logistic**æ¨¡å‹å®Œæˆç´¯ç§¯åˆ†å¸ƒæ›²çº¿çš„æ‹Ÿåˆï¼Œå¹¶æ ¹æ®æ‹Ÿåˆåæ¨¡å‹å‚æ•°é‡æ–°å¾—åˆ°æ ·æœ¬çš„å‡å€¼ã€‚\n\n### å¯¼å…¥ä¾èµ–åŒ…\n\næœ¬caseåœ¨jupyter notebookä¸­è¿è¡Œï¼Œå¯å…ˆå¯¼å…¥ä»¥ä¸‹åŒ…ï¼š\n\n```python\nimport os\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\n%matplotlib inline\n%config InlineBackend.figure_format = 'svg'\n\nfrom collections import Counter\nfrom scipy.optimize import curve_fit\n```\n\n### åˆ¶ä½œæ­£æ€åˆ†å¸ƒæ•°æ®é›†\n\nå…ˆåˆ¶ä½œä¸€ä¸ªæ•°æ®é›†ï¼Œå‡å€¼è®¾ç½®ä¸º10ï¼Œå˜å¼‚åº¦ä¸º5ã€‚\n\n```python\nmu = 10\nsigma = 5\nX = mu + sigma*np.random.randn(1000)\n```\n\nç®€å•ä½œå›¾å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„æ•°å€¼åˆ†å¸ƒï¼š\n\n![temp](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/temp.svg)\n\nå¦‚æœå°±Xæ•°æ®é›†ç›´æ¥è®¡ç®—å‡å€¼ï¼Œå‘ç°ä¸10è¿˜æ˜¯æœ‰ä¸€äº›å·®è·ï¼š\n\n![image-20210104191011726](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210104191011726.png)\n\n### è·å–åˆ†å¸ƒè®¡æ•°\n\nä¸»è¦ä½¿ç”¨`collections.Counter`å‡½æ•°ï¼š\n\n```python\na = Counter(X)\nb = dict(a)\nX2 = []\nfor key in b:\n    X2.append([key, b[key]])\nX2 = pd.DataFrame(X2, columns=['value', 'count'])\nX3 = X2.sort_values(by='value')\nX3['cum_count'] = X3['count'].cumsum()  # è®¡ç®—ç´¯ç§¯è®¡æ•°å€¼\nsns.lineplot(x='value', y='cum_count', data=X3)\nplt.show()\n```\n\n![temp2](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/temp2.svg)\n\n### é€‰å–æ¨¡å‹è¿›è¡Œæ›²çº¿æ‹Ÿåˆ\n\nè¿™é‡Œä¸»è¦åˆ©ç”¨`scipy.optimize.curve_fit`æ¥å®ç°æ›²çº¿æ‹Ÿåˆï¼Œéœ€è¦é€‰æ‹©åˆé€‚çš„å‡½æ•°æ¨¡å‹ã€‚å¯¹äºSå‹æ›²çº¿ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯**Logistic**æ¨¡å‹ï¼Œå…³äºSå‹æ›²çº¿æ‹Ÿåˆï¼Œå¯ä»¥å‚è€ƒã€Š[è½»æ¾æ„å»ºå¤šç§æ¨¡å‹æ‹ŸåˆSå‹æ›²çº¿](https://zhuanlan.zhihu.com/p/147467845)ã€‹ã€‚\n\n```python\ndef func(x, a, b, c):\n    '''\n    ä½¿ç”¨Logisticæ¨¡å‹æ¥æ‹Ÿåˆ\n    è¯¥æ¨¡å‹æœ‰3ä¸ªå‚æ•°\n    å½“x=b/cæ—¶ï¼Œæ›²çº¿å¤„äºæ‹ç‚¹ï¼Œå¯ç”¨äºä¼°è®¡æ­£æ€åˆ†å¸ƒçš„å³°å€¼\n    https://zhuanlan.zhihu.com/p/147467845\n    '''\n    return a/(1+np.exp(b-c*x))\n\nparams = curve_fit(func, X3['value'], X3['cum_count'])\npopt, pcov = params\nprint(popt[1]/popt[2])\n```\n\n![image-20210104192236878](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20210104192236878.png)\n\nå¯ä»¥çœ‹åˆ°æ‹ç‚¹å¯¹åº”çš„valueï¼Œè·Ÿæˆ‘ä»¬æœ€åˆè®¾ç½®çš„`mu=10`éå¸¸æ¥è¿‘äº†ã€‚\n\n### æŸ¥çœ‹æ‹Ÿåˆæ•ˆæœ\n\n```python\nX4 = [func(i, popt[0],popt[1],popt[2]) for i in X3['value']]\nX3['fit'] = X4\n\nsns.lineplot(x='value', y='cum_count', data=X3)\nsns.lineplot(x='value', y='fit', color='r', data=X3)\nplt.savefig(os.path.join(os.path.expanduser('~/Desktop/'), 'temp.svg'))\n```\n\n![temp3](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/temp3.svg)\n\n> æ³¨æ„ä¸€ä¸‹ï¼Œåé¢å¦‚æœå‘½åä¸´æ—¶æ–‡ä»¶ï¼Œç®€æ˜“å¸¦ä¸Šæ—¶é—´æˆ³ï¼Œä¸ç„¶å›¾åºŠä¼šè¦†ç›–ä¿å­˜ã€‚\n\n### å‚è€ƒé“¾æ¥\n\n1. [è½»æ¾æ„å»ºå¤šç§æ¨¡å‹æ‹ŸåˆSå‹æ›²çº¿](https://zhuanlan.zhihu.com/p/147467845)\n\n2. [Exponential Fit with Python](https://swharden.com/blog/2020-09-24-python-exponential-fit/)\n\n3. [ç´¯ç§¯åˆ†å¸ƒå‡½æ•°](https://baike.baidu.com/item/%E7%B4%AF%E7%A7%AF%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0)\n\n4. [python æ›²çº¿æ‹Ÿåˆ](https://blog.csdn.net/Fuxiu279/article/details/88429801)\n\n","tags":["curveFit","data","cumulative","distribution"],"categories":["python"]},{"title":"ä½¿ç”¨ImageJæå–æŸç‚¹çš„å¼ºåº¦æ—¶é—´æ›²çº¿","url":"/2020/12/30/getIntensityCurve/","content":"\næœ‰æ—¶å€™æ‹¿åˆ°åŸå§‹è§†é¢‘æ•°æ®(xyt)ä¹‹åï¼Œéœ€è¦åœ¨ImageJä¸­ç¨å¾®é¢„è§ˆä¸€ä¸‹ï¼Œäº†è§£å¤§æ¦‚æƒ…å†µã€‚å…¶ä¸­ä¸€ä¸ªé‡è¦çš„viewæ˜¯å¾—çœ‹ä¸€ä¸‹æŸä¸ªä½ç½®çš„ä¿¡å·çš„é—ªçƒæƒ…å†µï¼Œæ‰€ä»¥éœ€è¦æå–è¯¥ä½ç½®(x,y)çš„å¼ºåº¦éšæ—¶é—´å˜åŒ–çš„æ›²çº¿ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„ImageJ Macroè„šæœ¬æ¥å®ç°æ­¤åŠŸèƒ½ã€‚è„šæœ¬è¿è¡Œåï¼Œç”¨æˆ·åœ¨å›¾åƒä¸Šç‚¹å‡»æŸä¸ªä½ç½®ï¼Œå°±ä¼šæŠŠè¯¥ä½ç½®ä¿å­˜åˆ°ROIç®¡ç†å™¨ï¼Œç„¶åæå–è¯¥ä½ç½®çš„Intensity(t)ï¼Œå¹¶ç»˜åˆ¶å›¾åƒã€‚\n\n### ä»£ç \n\nä»£ç çš„å‡ ä¸ªè¦æ³¨æ„çš„åœ°æ–¹ï¼š\n\n1. éœ€è¦è‡ªå®šä¹‰é€‰å–æ¡†çš„å¤§å°ï¼Œå¯¹äºå•åˆ†å­è§å…‰å…‰æ–‘ï¼Œ4å°±è¶³å¤Ÿäº†\n2. å¯ä»¥è®¾ç½®æ˜¯å¦å¤šæ¬¡é€‰å–ï¼Œå¦‚æœæ˜¯å¤šæ¬¡ï¼Œå°±é»˜è®¤é€‰å–3ä¸ªç‚¹\n3. æå–çš„intensityæ˜¯é€‰å–æ¡†çš„å‡å€¼ï¼Œè¿™æ ·èƒ½æœ‰æ•ˆæŠ‘åˆ¶èƒŒæ™¯å™ªå£°æ³¢åŠ¨\n\nåœ¨å®ç°ä¸Šï¼Œè¿™ä¸ªä»£ç è¿˜è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š\n\n1. ç›‘å¬å¹¶è¿”å›ç”¨æˆ·ç‚¹å‡»é¼ æ ‡äº‹ä»¶\n2. è‡ªåŠ¨åˆ‡æ¢Sliceï¼Œå³é€å¸§åŒxyåæ ‡å–å€¼\n\n\n```javascript\n/*\n * è¯¥è„šæœ¬é€‚ç”¨äºæ‰‹åŠ¨åˆ†æTIRFè§†é¢‘æ•°æ®ä¸­æŸç‚¹çš„å¼ºåº¦éšæ—¶é—´å˜åŒ–æƒ…å†µ\n * Author: Xiao-Dong Xie\n * 2020å¹´12æœˆ31æ—¥\n */\n\ntime_interval = Stack.getFrameInterval();  \n// å†…ç½®å‡½æ•°ï¼Œè·å–stackçš„å¸§æ—¶é—´é—´éš”ï¼Œé€‚ç”¨äºåŸå§‹TIRFæ•°æ®\nboxWidth = 4;\n// ç‚¹é€‰å–å€¼æ¡†å¤§å°\nmultiCheck = true; \n// å¦‚éœ€å¤šæ¬¡æ£€æŸ¥ï¼Œä¿®æ”¹æ­¤å¤„ä¸ºtrueï¼Œå¯å°†mainç½®å…¥forå¾ªç¯ä¸­\nmultiCheckNum = 3;\n\n// ================================================\nif (multiCheck) {\n\tfor (i = 0; i < multiCheckNum; i++) {\n\t\tmain(boxWidth, i); \n\t}\t\n}\nelse {\n\tmain(boxWidth, 0);\n}\n\n// =================================================\n\nfunction main(boxWidth, cid){\n\t/** ç‚¹å‡»stackä¸Šä¸€ä¸ªç‚¹ï¼Œè¿”å›time profile\n\t *  boxWidth: å…¨é€‰æ¡†å¤§å°\n\t *  cidï¼šé€‰ç‚¹çš„åºå·\n\t */\n\tloc = chooseParticle();\n\tx = loc[0];\n\ty = loc[1];\n\tmakePoint(x, y, \"small yellow hybrid\");\n\troiManager(\"add\"); // æŠŠè¯¥ç‚¹åŠ å…¥roiç®¡ç†å™¨\n\twait(300);\n\tn = getSliceNumber();\n\tlong = nSlices;\n\tv = newArray(long);\n\tt = newArray(long);\n\tfor (i = 0; i < long; i++) {\n\t\tsetSlice(i+1);\n\t\t// va = getPixel(x, y);\n\t\t// ç”¨å–å°åŒºåŸŸå‡å€¼çš„æ–¹å¼æ›´å¥½\n\t\tva = getRectRegionMeanValue(x, y, boxWidth);\n\t\tv[i] = va;\n\t\tt[i] = i*time_interval;\n\t}\n\tsetSlice(n);\n\tPlot.create(\"Time Profile \"+cid, \"Time (sec)\", \"Intensity\", t, v);\n\tPlot.show();\n}\n\nfunction chooseParticle(){\n    // é¼ æ ‡å•å‡»å›¾åƒä¸ŠæŸä¸ªç‚¹ï¼Œå³è¿”å›å…¶åæ ‡\n    leftButton = 16;\n    flags = 0;\n    while(flags&leftButton == 0) getCursorLoc(x,y,z,flags);\n    return newArray(x,y);\n}\n\nfunction getRectRegionMeanValue(x, y, width){\n\t//ä»¥(x,y)åæ ‡ä¸ºä¸­å¿ƒï¼Œè·å–è¾¹é•¿ä¸ºwidthçš„æ­£æ–¹å½¢åŒºåŸŸçš„å¹³å‡å¼ºåº¦\n\t// ä¸è¿”å›æœ€å¤§çš„å¼ºåº¦ï¼Œæ˜¯å› ä¸ºæ³¢åŠ¨æ¯”è¾ƒå¤§\n\tmakeRectangle(x-width/2, y-width/2, width, width);\n\tgetStatistics(area, mean, min, max, std, histogram);\n\treturn mean;\n}\n```\n\n### ç»“æœ\n\nä½¿ç”¨çš„æ—¶å€™ï¼ŒæŠŠè§†é¢‘æ•°æ®ï¼ˆtifæ ¼å¼ï¼‰æ‰“å¼€åï¼Œå†æŠŠ`getIntensityCurves.ijm`è„šæœ¬æ–‡ä»¶æ‹–å…¥Fijiæ‰“å¼€ï¼Œç„¶ååœ¨consoleä¸­ç‚¹å‡»`run`è¿è¡Œï¼Œç„¶ååœ¨è§†é¢‘å›¾åƒä¸Šé€‰å–ä½ æƒ³æå–æ•°å€¼çš„ç‚¹ã€‚ç»“æœå¦‚ä¸‹ï¼š\n\n![image-20201231082554717](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201231082554717.png)","tags":["TIRF"],"categories":["ImageJ"]},{"title":"å…è´¹ä¸‹è½½ç½‘æ˜“äº‘éŸ³ä¹mp3çš„å°å·¥å…·","url":"/2020/12/30/downloadCloudMusic/","content":"\nç›´æ¥ä¸Šä»£ç å§ï¼Œé€»è¾‘éå¸¸ç®€å•ï¼Œå°±æ˜¯ä»ç½‘æ˜“äº‘åˆ†äº«é“¾æ¥ä¸­æå–musicçš„IDï¼Œç„¶åæ„é€ å¤–é“¾ï¼š`http://music.163.com/song/media/outer/url?id={musicID}.mp3`ï¼Œå†ç›´æ¥ç”¨requestsæ¨¡å—è¯·æ±‚è¿™ä¸ªå¤–é“¾ï¼Œä¸‹è½½å†…å®¹ä¿å­˜ä¸ºmp3æ ¼å¼çš„æ–‡ä»¶å³å¯ã€‚ä¸ºäº†æ–¹ä¾¿å®ç”¨ï¼Œæˆ‘è¿˜åˆ©ç”¨`pySimpleGUI`åšäº†ä¸€ä¸ªéå¸¸ç®€æ˜“çš„ç”¨æˆ·ç•Œé¢ï¼Œæ–¹ä¾¿æ“ä½œã€‚\n\n```python\nimport requests\nimport re\nimport os\nimport PySimpleGUI as sg\n\ndef extractMusiceID(url):\n    pattern = re.compile(r'id=\\d+')\n    mID,uID = pattern.findall(url)\n    mID = mID.split(\"=\")[1]\n    uID = uID.split(\"=\")[1]\n    print(\"User:{}\\nMusic:{}\".format(uID,mID))\n    return mID\n\ndef downloadMusic(mID,name):\n    url = \"http://music.163.com/song/media/outer/url?id={}.mp3\".format(mID)\n    # éœ€è¦ä½¿ç”¨headerï¼Œä¸ç„¶urlé‡å®šå‘ä¹‹åæŠ“ä¸åˆ°\n    header = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36'}\n    r = requests.get(url,headers=header)\n    data = r.content\n    wks = os.path.expanduser(\"~/desktop\")  # é»˜è®¤ä¸‹è½½åˆ°æ¡Œé¢\n    fpath = os.path.join(wks,\"{}.mp3\".format(name))\n    with open(fpath,\"wb\") as f:\n        f.write(data)\n\ndef main(url,name):\n    mID = extractMusiceID(url)\n    downloadMusic(mID,name)\n\nif __name__ == \"__main__\":\n    \n    layout = [\n            [sg.Text(\"æ›²å\"),sg.Input(key='-Name-')],\n            [sg.Text(\"é“¾æ¥\"),sg.Input(key='-Url-')],\n            [sg.Button('Download'),sg.Exit()]\n            ]\n\n    window = sg.Window('ç½‘æ˜“äº‘éŸ³ä¹ä¸‹è½½', layout)\n\n    while True:\n        event, values = window.Read() \n        if event == 'Download':\n            name = values['-Name-']\n            url = values['-Url-']\n            main(url,name)\n        if event in (None, 'Exit'):      \n            break\n    window.Close()\n```\n\nè¿è¡Œä¹‹åï¼Œå¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œå¡«å†™ä¸¤è¡Œä¿¡æ¯ï¼ŒDownloadå°±ä¼šæŠŠmp3ä¸‹è½½åˆ°æ¡Œé¢ï¼š\n\n![image-20201230122701166](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201230122701166.png)\n\nç„¶åè¾“å…¥æ­Œæ›²åå­—ï¼Œä»¥åŠåˆ†äº«é“¾æ¥ã€‚é“¾æ¥å¯ä»¥ä»ç½‘æ˜“äº‘éŸ³ä¹ä¸­è·å–ï¼š\n\n![image-20201230122626573](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201230122626573.png)\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n![image-20201230122805612](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201230122805612.png)\n\n### æ¥ä¸€é¦–ã€Šæ¢¦ä¼´ã€‹\n\n\n<iframe src=\"//player.bilibili.com/player.html?aid=23415950&bvid=BV1Kp411Z7ci&cid=39036220&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" > </iframe>\n","tags":["requests","gui"],"categories":["python"]},{"title":"pandasæ¨¡å—å¸¸ç”¨åŠŸèƒ½å¤‡å¿˜å½•","url":"/2020/12/29/pandasUsageSummary/","content":"\nä½¿ç”¨pythonè¿›è¡Œæ•°æ®åˆ†æï¼Œç¦»ä¸å¼€`numpy`ï¼Œ`pandas`ï¼Œ`matplotlib`ä¸‰ä¸ªåŒ…ã€‚ä¸ºäº†ä½œå›¾å¥½çœ‹ï¼Œæˆ‘è¿˜å¸¸ç”¨`seaborn`ã€‚ä¸è¿‡`numpy`ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ²¡æœ‰pandasé‚£ä¹ˆçˆ½ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯ç”¨pandaså’Œseabornæœ€å¤šã€‚æ‰€ä»¥è¶ç€è¿˜æœ‰ä¸€ç‚¹å†™åšå®¢çš„çƒ­æƒ…ï¼Œå…ˆæ•´ç†ä¸€ä¸‹pandasçš„å¸¸ç”¨åŠŸèƒ½ã€‚\n\nå½“ç„¶äº†ï¼Œ ä»‹ç»æœ€è¯¦ç»†çš„è¿˜æ˜¯å®˜ç½‘æ–‡æ¡£ï¼š\n\nhttps://pandas.pydata.org/docs/\n\n### è¯»å–æ•°æ®\n\npandaså¯ä»¥è¯»å–å„ç±»æ•°æ®æ–‡ä»¶ï¼Œæ¯”å¦‚`csv`ã€`xlsx`ã€`hdf5`ç­‰ã€‚è€Œè¯»å–çš„å‘½ä»¤ä¸€èˆ¬è¾“å…¥`pd.read`ä»£ç è‡ªåŠ¨è¡¥å…¨æç¤ºå°±ä¼šå‡ºæ¥å¾ˆå¤šã€‚æˆ‘è¿™é‡Œä¹Ÿä¸å¤šè¯´ï¼Œæƒ³æŸ¥çœ‹ï¼Œå¯ä»¥è¾“å…¥ä¸€ä¸‹å‘½ä»¤ï¼š\n\n```python\nimport pandas as pd\nfor func in dir(pd):\n\tif func.startswith('read'):\n\t\tprint(func)\n```\n\nä½¿ç”¨æ–¹æ³•åŸºæœ¬ä¸Šéƒ½æ˜¯è¦è¾“å…¥filepathï¼Œç„¶å`pd.read_hdf`è¿˜éœ€è¦è¾“å…¥hdf5çš„datasetçš„keyåã€‚æˆ‘åœ¨å¤„ç†picassoäº§å‡ºçš„ä¸­é—´æ•°æ®æ—¶ï¼Œè¿˜ç»å¸¸ç”¨åˆ°ä»¥ä¸‹å‘½ä»¤ï¼š\n\n```python\ndef hdf2dataframe(filepath):\n    '''\n    åªé€‚ç”¨äºpicassoåˆ†æè¿‡ç¨‹ä¸­ç”Ÿæˆçš„hdf5æ–‡ä»¶æ•°æ®ç»“æ„\n    è¾“å‡ºä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†ä¸åŒçš„dataframe\n    '''\n    data = {}\n    dataset = h5py.File(filepath, 'r')\n    for key in dataset.keys():\n        df = pd.DataFrame(dataset[key][()],dtype=\"float64\")  # æ³¨æ„æ•°æ®ç²¾åº¦\n        data[key] = df\n    return data\n```\n\nè¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°å¯ä»¥æŠŠhdf5æ•°æ®ä¸­ä¸åŒçš„datasetè½¬åŒ–ä¸ºpandasçš„DataFrameï¼Œå¹¶ä¿å­˜åˆ°å­—å…¸ä¸­ã€‚ä½†äº‹å®ä¸Šå½“ä½ çŸ¥é“datasetçš„keyåå¾ˆå›ºå®šï¼ŒåŸºæœ¬éƒ½æ˜¯`locs`çš„æ—¶å€™ï¼Œåªéœ€è¦ä¸‹é¢ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥äº†ï¼š\n\n```python\ndata = pd.read_hdf('cluster_filtered.hdf5','locs')\n```\n\n### ä¿å­˜æ•°æ®\n\nå¯¹äº`pd.DataFrame`å¯¹è±¡ï¼Œå¯ä»¥æŠŠæ•°æ®è¡¨ä¿å­˜åˆ°å„ç§æ ¼å¼çš„æ–‡ä»¶ä¸­ã€‚ä¸‹é¢ç®€å•ä¸¾å‡ ä¸ªä¾‹å­ï¼š\n\n```python\n# å‡è®¾dataæ˜¯ä¸€ä¸ªdataFrame\ndata.to_csv(filepath, index=None)  # ä¿å­˜ä¸ºcsvæ–‡ä»¶\ndata.to_excel(filepath, index=None)  # ä¿å­˜ä¸ºxlsxæ–‡ä»¶\ndata.to_pickle(filepath)  # ä¿å­˜ä¸ºpklæ–‡ä»¶\ndata.to_hdf(filepath, 'locs')  # ä¿å­˜ä¸ºhdf5æ–‡ä»¶\n```\n\nå…¶ä¸­csvå’Œxlsxæ–‡ä»¶éƒ½å¯ä»¥ä½¿ç”¨excelæ‰“å¼€ï¼Œæˆ‘ç»å¸¸ä½¿ç”¨ï¼Œä½†ä¸ºäº†é¿å…å¤šä½™çš„indexåˆ—ï¼Œæˆ‘é€šå¸¸ä¼šæŒ‡å®š`index=None`ã€‚å¤„ç†çš„ä¸­é—´æ•°æ®è‹¥éœ€è¦ä¿å­˜ï¼Œä½¿ç”¨pklæ–‡ä»¶æ˜¯æœ€æ–¹ä¾¿çš„ï¼Œæ²¡æœ‰å…¶ä»–å‚æ•°éœ€è¦å£°æ˜ã€‚ä¿å­˜ä¸ºhdf5æ–‡ä»¶è·Ÿæ‰“å¼€çš„æ—¶å€™ç±»ä¼¼ï¼Œè¿˜è¦å†™keyåã€‚\n\n### pd.DataFrameå¯¹è±¡\n\næ•°æ®å¸§æ˜¯pandasæœ€é‡è¦çš„æ¦‚å¿µï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚ç®€å•æ¥è¯´ï¼Œå°±è·Ÿä½ åœ¨excelä¸­çœ‹åˆ°çš„è¡¨æ ¼ä¸€æ ·çš„ã€‚ä»å½¢çŠ¶ä¸Šè®²ï¼Œå°±æ˜¯ä¸€ä¸ªäºŒç»´çŸ©å½¢ã€‚\n\nä½¿ç”¨`pd.read_??`æ–¹æ³•è¯»å–æ•°æ®æ–‡ä»¶ï¼Œè¿”å›çš„åŸºæœ¬ä¸Šéƒ½æ˜¯æ•°æ®å¸§ï¼Œç„¶åä½ å°±å¯ä»¥è¿›è¡Œå„ç§æ„‰å¿«çš„æ“ä½œã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠç¨‹åºè¿è¡Œä¸­å…¶ä»–ç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºä¸€ä¸ªDataFrameï¼Œä¸‹é¢ä»‹ç»å‡ ç§æ–¹å¼ï¼š\n\n```python\nimport numpy as np\na = np.random.randint(10, size=(5,3))  # äº§ç”Ÿä¸€ä¸ª3x5çš„éšæœºæ•°çŸ©é˜µ\nb = pd.DataFrame(a, columns=list('abc'))  \n# æ•°æ®æœ‰5åˆ—ï¼Œå¿…é¡»ç»™columnåï¼Œ\n# indexåä¹Ÿå¯ä»¥æŒ‡å®šï¼Œè‹¥æ— åˆ™ä¼šé»˜è®¤ä»0å¼€å§‹\n```\n\nä»¥ä¸Šå°±æ˜¯ä»numpyäºŒç»´æ•°ç»„ç›´æ¥è½¬æˆæ•°æ®å¸§çš„æ“ä½œï¼Œå°±æ˜¯è¦æ³¨æ„columnsçš„å‘½åã€‚æ•ˆæœå¦‚ä¸‹ï¼š\n\n<img src=\"https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201229201642898.png\" alt=\"image-20201229201642898\"  />\n\nå¦å¤–ä¹Ÿæœ‰ä¸€äº›æ›´å‚»ç“œçš„æ–¹æ³•ï¼š\n\n```python\na = pd.DataFrame()   # å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„æ•°æ®å¸§\na['a'] = [x for x in range(3)]\na['b'] = np.random.randint(10, size=(3,))\n```\n\nå…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„æ•°æ®å¸§å¯¹è±¡ï¼Œç„¶åèµ‹å€¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è¦æ³¨æ„æ¯ä¸€ä¸ªcolumnçš„æ•°æ®é•¿åº¦è¦ä¸€è‡´ã€‚è¿™ä¸ªæ“ä½œæœ‰ç‚¹åƒå­—å…¸ã€‚æ²¡é”™ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥æŠŠå­—å…¸è½¬åŒ–ä¸ºæ•°æ®å¸§ï¼š\n\n```python\na = {'a':[1,2,3], 'b':[4,5,6]}\nb = pd.DataFrame(a)\n```\n\n### æ•°æ®å¸§çš„å–å€¼\n\n```python\na = np.random.randint(10, size=(3,5))  # äº§ç”Ÿä¸€ä¸ª5x3çš„éšæœºæ•°çŸ©é˜µ\nb = pd.DataFrame(a, columns=list('abcde'))  # æ•°æ®æœ‰ä¸‰åˆ—ï¼Œç»™columnå\nb.loc[0,'c']  # æ³¨æ„æ˜¯æ–¹æ‹¬å·ï¼Œç¬¬ä¸€ä¸ªæ˜¯index nameï¼Œ ç¬¬äºŒä¸ªæ˜¯columnåï¼Œè¿”å›å•ä¸ªå€¼\nb.iloc[0] # æ³¨æ„æ–¹æ‹¬å·ï¼Œè¿™é‡Œåªèƒ½è¾“å…¥indexåï¼Œè¿”å›ä¸€è¡Œæ•°æ®ï¼ˆpd.Seriesï¼‰\n```\n\nå¦‚ä¸Šæ‰€ç¤ºï¼Œæ•°æ®å¸§å°±æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œå–å€¼ç»™ç´¢å¼•å°±å¥½ï¼Œä¸è¿‡åœ¨æˆ‘çš„å®è·µè¿‡ç¨‹ä¸­ï¼Œå¾ˆå°‘ç›´æ¥å–æŸä¸ªç‰¹å®šä½ç½®çš„æ•°å€¼ã€‚éå†å€’æ˜¯å¸¸ç”¨ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œå»ºè®®ä½¿ç”¨å¦‚ä¸‹çš„éå†æ–¹å¼ï¼š\n\n```python\nfor idx,row in df.iterrows():\n    # rowæ˜¯æ•°æ®å¸§çš„æŸä¸€è¡Œ\n    doSomeThingWith(row)\n```\n\n### æ•°æ®å¸§åˆ†ç»„\n\n```python\ngp =data.groupby(by=['column_name_1', 'column_name_2'])\n```\n\nä¸€èˆ¬åˆ†ç»„å®Œäº†ï¼Œè¿˜å¯ä»¥éå†åˆ†ç»„ï¼Œåšä¸€äº›æ“ä½œï¼š\n\n```python\nfor key, df in gp:\n    # key æ˜¯åˆ†ç»„æ•°æ®å¯¹åº” column_name_1', 'column_name_2' è¿™ä¸¤åˆ—çš„å€¼\n    # df æ˜¯åˆ†ç»„çš„å­æ•°æ®å¸§\n    doSomeThingWith(df)\n```\n\n### æ•°æ®ç­›é€‰\n\n```python\ndata2 = data.filter(items=['column_1', 'column_2'])\n# ç±»ä¼¼çš„è¿˜æœ‰ä¸€ä¸ªdropæ–¹æ³•\n```\n\nä¸Šè¿°ä»£ç å¯ä»¥ä»dataåŸæ•°æ®å¸§ä¸­å–å‡ºä¸¤åˆ—å€¼ã€‚\n\n```python\nlabel = [0,2,3]\nregion_new = region[region['Cluster'].isin(labels)]  \n```\n\nä¸Šè¿°ä»£ç å¯ä»¥æŒ‰`Cluster`è¿™ä¸€åˆ—çš„å€¼è¿›è¡Œç­›é€‰ï¼Œå¦‚æœå€¼å­˜åœ¨äºlabelåˆ—è¡¨ä¸­ï¼Œåˆ™è¢«æå–å‡ºæ¥ã€‚\n\n```python\ndf = localization[(localization['x']>(x-radii))&\\\n                 (localization['x']<(x+radii))&\\\n                 (localization['y']>(y-radii))&\\\n                 (localization['y']<(y+radii))]\n```\n\nä¸Šè¿°ä»£ç æ ¹æ®æ•°æ®å¸§ä¸­çš„æ•°å€¼æŒ‡å®šèŒƒå›´è¿›è¡Œç­›é€‰ï¼Œæ³¨æ„æ–¹æ‹¬å·ï¼Œç„¶åå¤šä¸ªåˆ¤æ–­æ¡ä»¶çš„å¸ƒå°”è¿ç®—è¦ç”¨å°æ‹¬å·ã€‚\n\n### æ•°æ®æ’åº\n\n`data.sort_values(by=??)`ï¼Œå¶å°”ä¼šç”¨ã€‚\n\n### æ•°æ®ç¿»è½¬\n\n`data.T`\n\næŠŠrowå’Œcolumnç¿»è½¬ä¸€ä¸‹ï¼Œå¶å°”ä¼šç”¨ã€‚\n\n### æ•°æ®åˆå¹¶\n\n`pd.concat([df1, df2])`\n\næŠŠä¸€äº›ç¬¦åˆæ¡ä»¶çš„DataFrameåˆå¹¶ï¼Œæ³¨æ„å‰ææ˜¯å®ƒä»¬å…·æœ‰ç›¸åŒçš„columnï¼Œç„¶åå¯ä»¥æ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œé¢ã€‚\n\nä¸‹é¢è¿˜æä¾›ä¸€ä¸ªä¾‹å­ï¼Œæ€ä¹ˆæŠŠserieså åŠ åšæˆæ•°æ®å¸§ã€‚\n\n```python\na = pd.Series([1,2,3], index=list('abc'))  # åºåˆ—\nb = pd.Series([4,5,6], index=list('abc')) \nc = pd.concat([a,b]) # çºµå‘å åŠ series\nd = pd.concat([a,b], axis=1) # æ¨ªå‘å åŠ \ne = d.T # ç¿»è½¬\n```\n\n### æ•°æ®èåŒ–\n\n`pd.melt`\n\nå¯ä»¥æŠŠæ–°å»ºä¸€ä¸ªcolumnï¼ŒæŠŠå…¶ä¸­æŸäº›columnè½¬æˆæ–°çš„columnçš„valueï¼Œä¹Ÿéå¸¸å®ç”¨ï¼Œåœ¨seabornä½œå›¾çš„æ—¶å€™ï¼Œç”¨åˆ°è¿‡ä¸€äº›ã€‚\n\n### éšæœºé‡‡æ ·\n\n`data.sample([n, frac, ...])`\n\nå¯ä»¥æŒ‡å®šéšæœºè¿”å›çš„æ•°é‡ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ¯”ä¾‹ã€‚åŠ å…¥dataçš„é•¿åº¦æ˜¯1000ï¼Œn<1000, fracåœ¨0-1ä¹‹é—´å–å°æ•°ã€‚\n\n### åè®°\n\nå†™åˆ°è¿™é‡Œï¼Œæƒ³å†™ç‚¹ä»€ä¹ˆçš„å†²åŠ¨æ¶ˆé€€ï¼Œæƒ³æƒ³æˆ‘åˆå¹²äº†ä¸€ä»¶è ¢äº‹ã€‚ä»€ä¹ˆæ¨¡å—ä»€ä¹ˆåŠŸèƒ½ç‰¹åˆ«æ˜¯å…·ä½“åˆ°å“ªä¸ªå‡½æ•°çš„ç”¨æ³•ï¼ŒçœŸçš„ä¸è¦å»è¯•å›¾è®°å¿†ç”šè‡³æ±‡æ€»å®ƒä»¬ã€‚å¦‚æœä½ ç”¨çš„åˆ«äººçš„ï¼Œè¯·æŸ¥çœ‹ä»–ä»¬çš„æ–‡æ¡£ã€‚å¦‚æœæ˜¯ä½ è‡ªå·±å†™çš„ï¼Œè¯·è‡ªå·±å†™å¥½æ–‡æ¡£ã€‚è®©è¿™äº›ç”µå­è®°å½•æˆä¸ºä½ çš„â€œç¬¬äºŒå¤§è„‘â€ï¼Œè¿™ä¸å°±æ˜¯æˆ‘çš„åˆå¿ƒä¹ˆï¼Ÿæ‰€ä»¥åƒè¿™ç§äº‹æƒ…ï¼Œåªæœ‰è¿™ä¸€æ¬¡ï¼Œä»¥åçš„æ¯ä¸€ç¯‡åšæ–‡ï¼Œéƒ½è¦å¯¹åº”æˆ‘è‡ªå·±åœ¨æ•°æ®åˆ†ææˆ–è€…æ—¥å¸¸ç”Ÿæ´»ä¸­é‡åˆ°çš„å…·ä½“çš„å¯ä»¥ç”¨ç¼–ç¨‹çš„æ–¹å¼è§£å†³çš„é—®é¢˜ã€‚","tags":["pandas"],"categories":["python"]},{"title":"åŸºäºpythonçš„DNAå®šé‡æµ“åº¦è®¡ç®—å™¨","url":"/2020/12/29/oligoCalculator/","content":"\n### èµ·å› \n\nä½¿ç”¨ç¦»çº¿çš„OligoCalculatoråªèƒ½ä¸€ä¸ªä¸ªåºåˆ—æ‹·è´è¿›å»ç„¶åè¾“å…¥A260çš„å€¼ï¼Œå†è®¡ç®—ã€‚è¿™æ ·åšå¤ªç¹çäº†ï¼Œå¦‚æœæ•°é‡æ¯”è¾ƒå°‘è¿˜å¥½ã€‚ä½†å¦‚æœä¸€æ¬¡æ€§æµ‹å®šæ¯”è¾ƒå¤šçš„é“¾ï¼Œå¾ˆå®¹æ˜“å¤åˆ¶å‡ºé”™ã€‚æ‰€ä»¥æˆ‘åœ¨ã€Š[åŸºäºç´«å¤–å¯è§å…‰å¸æ”¶å…‰è°±çš„DNAåˆ†å­å®šé‡](https://sheldonxxd.github.io/2020/12/28/basicUVspectrumAnalysis/index.html)ã€‹æ–‡ç« çš„åŸºç¡€ä¹‹ä¸Šï¼Œè¿›ä¸€æ­¥å‚ç…§[Thermoçš„è¯´æ˜](https://www.sigmaaldrich.com/china-mainland/technical-documents/articles/biology/quantitation-of-oligos.html)å†™äº†ä¸€ä¸ªèƒ½å¤Ÿæ‰¹é‡è‡ªåŠ¨æ ¹æ®å¸å…‰åº¦è®¡ç®—æ ·å“æµ“åº¦çš„pythonç‰ˆæœ¬çš„oligo calculatorã€‚\n\n> è¦æ’å…¥è‡ªå·±ä¹‹å‰çš„æ–‡ç« çš„urlï¼Œè®°å¾—åŠ ä¸Šindex.htmlï¼Œä¸ç„¶æ— æ³•è·³è½¬è¶…é“¾æ¥ã€‚\n\n### è¾“å…¥\n\n![image-20201229100558994](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201229100558994.png)\n\næ³¨æ„è¿™ä¸ªè¡¨æ ¼æ–‡ä»¶å‰é¢ä¸‰åˆ—éƒ½æ˜¯ã€ŠåŸºäºç´«å¤–å¯è§å…‰å¸æ”¶å…‰è°±çš„DNAåˆ†å­å®šé‡ã€‹æ–‡ç« ä¸­ä»£ç å¤„ç†åç”Ÿæˆçš„ï¼Œè€ŒLabelã€Sequenceã€Moduficationä»¥åŠDiluteRatioéœ€è¦è‡ªå·±è¡¥å……ã€‚æ‹¿åˆ°äº†è¿™æ ·ä¸€å¼ è¡¨ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¡¨è¿›è¡Œè®¡ç®—ã€‚\n\n### ä»£ç \n\n```python\nimport pandas as pd\n\ndef getNearestBaseCombination(seq):\n    n = len(seq)\n    data = []\n    for i in range(n-1):\n        data.append(seq[i:i+2])\n    return data\n\ndef getRepeatSingleBase(seq):\n    return list(seq[1:-1])\n\ndef getMolarConc(Abs, Seq, Length=1):\n    '''\n    === è¾“å…¥å‚æ•° ===\n    Abs: Floatï¼Œæµ‹å®šUV-Viså¸æ”¶å…‰è°±çš„å³°å€¼ï¼Œä¸€èˆ¬ä¸ºA260\n    Seq: Stringï¼Œå¯¡æ ¸è‹·é…¸æ ·å“çš„åºåˆ— \n    Length: Floatï¼Œå…‰ç¨‹ï¼Œä¸€èˆ¬ä¸º1 cm\n    === è¿”å›å€¼ ===\n    E_seq: å•çº¯è®¡ç®—åºåˆ—è·å¾—çš„æ¶ˆå…‰ç³»æ•°ï¼Œå¦‚æœ‰ä¿®é¥°åŸºå›¢ï¼Œè¯·åˆ°IDTä¸ŠæŸ¥è¯¢å…¶æ¶ˆå…‰ç³»æ•°ååšæµ“åº¦æ ¡æ­£\n    Conc: Float, æµ‹å®šæ ·å“çš„æ‘©å°”æµ“åº¦ï¼Œä»¥uMï¼ˆumol/Lï¼‰ä¸ºå•ä½\n    å¦‚è¦è·å–åŸæ¶²æ ·å“ï¼Œå¯è‡ªè¡Œä¹˜ä»¥ç¨€é‡Šå€æ•°\n    '''\n    e = {'A':15400, 'C':7400, 'G':11500, 'T':8700, \n        'AA':27400, 'AC':21200, 'AG':25000, 'AT':22800,\n        'CA':21200, 'CC':14600, 'CG':18000, 'CT':15200,\n        'GA':25200, 'GC':17600, 'GG':21600, 'GT':20000,\n        'TA':23400, 'TC':16200, 'TG':19000, 'TT':16800}\n    \n    # æ¶ˆå…‰ç³»æ•°è¡¨æ ¼ï¼Œ å‚è€ƒé“¾æ¥å¦‚ä¸‹\n    # https://www.sigmaaldrich.com/china-mainland/technical-documents/articles/biology/quantitation-of-oligos.html\n    cut = getNearestBaseCombination(Seq)\n    repeat = getRepeatSingleBase(Seq)\n    E_seq = 0\n    for c in cut:\n        E_seq += e[c]\n    for r in repeat:\n        E_seq -= e[r]\n    # Eçš„å•ä½æ˜¯L â‹… mol-1 â‹… cm-1\n    Conc = Abs/(E_seq*Length)*1e6\n    # Concçš„å•ä½æ˜¯ uM\n    return E_seq,Conc\n\ndef main(filepath):\n    '''\n    filepathï¼šè¾“å…¥æ±‡æ€»è¡¨æ ¼æ–‡ä»¶è·¯å¾„\n    è¡¨æ ¼ä¸­å¿…é¡»åŒ…å«æ ·å“çš„å¸å…‰å€¼ï¼ˆPeakValueï¼‰,åºåˆ—ï¼ˆSequenceï¼‰å’Œç¨€é‡Šå€æ•°(DiluteRatio)ä¸‰åˆ—ä¿¡æ¯\n    å»ºè®®åœ¨`extractUVspectrum.py`ç”Ÿæˆçš„excelæ–‡ä»¶ä¸­è¡¥å……åºåˆ—å’Œç¨€é‡Šå€æ•°å³å¯\n    è®¡ç®—å®Œæˆåï¼Œåœ¨è¡¨æ ¼ä¸­æ–°å¢æ¶ˆå…‰ç³»æ•°å’ŒåŸæ¶²æµ“åº¦ä¸¤åˆ—ä¿¡æ¯\n    '''\n    data = pd.read_excel(filepath)\n    concs = []\n    Es = []\n    for idx, row in data.iterrows():\n        e,c = getMolarConc(row['PeakValue'], row['Sequence'])\n        c = c*row['DiluteRatio']\n        concs.append(c)\n        Es.append(e)\n    data['E(Lâ‹…mol-1â‹…cm-1)'] = Es\n    data['Conc(uM)'] = concs\n    data.to_excel(filepath, index=None)\n    print('æµ“åº¦è®¡ç®—å®Œæˆï¼Œå·²åˆ·æ–°è¡¨æ ¼æ•°æ®ï¼')\n\nif __name__ == \"__main__\":\n    filepath = \"/path/to/ssDNAå®šé‡ç»“æœ.xlsx\"\n    main(filepath)\n```\n\n### ç»“æœ\n\n![image-20201229100438254](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201229100438254.png)\n\nè®¡ç®—å®Œæˆåï¼Œæ–°å‡ºç°äº†ä¸¤åˆ—æ•°æ®ï¼Œåˆ†åˆ«æ˜¯ä¸åŒæ ·æœ¬æ‰€å¯¹åº”çš„æ¶ˆå…‰ç³»æ•°å’Œç¨€é‡Šå‰åŸæ¶²çš„æµ“åº¦ã€‚éœ€è¦æ³¨æ„ï¼Œ**å¦‚æœæœ‰ä¿®é¥°ï¼Œè‡ªè¡Œåˆ°[IDTæŸ¥è¯¢ä¿®é¥°åŸºå›¢çš„æ¶ˆå…‰ç³»æ•°](https://sg.idtdna.com/site/Catalog/Modifications)ï¼Œè·Ÿæ­¤è¡¨ä¸­çš„æ¶ˆå…‰ç³»æ•°ç›¸åŠ ï¼Œç„¶åæ ¹æ®ç…å‹ƒæ¯”å°”å®šå¾‹å¯¹æµ“åº¦è¿›è¡Œæ ¡æ­£**ã€‚\n\n![image-20201229103945287](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201229103945287.png)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨excelè¡¨æ ¼ä¸­è¿›è¡Œæ“ä½œå³å¯ï¼Œæœ€åå¾—åˆ°æœ€ç»ˆçš„å‡†ç¡®çš„å®šé‡æµ“åº¦ç»“æœã€‚","tags":["DNA","calculator"],"categories":["python"]},{"title":"åŸºäºç´«å¤–å¯è§å…‰å¸æ”¶å…‰è°±çš„DNAåˆ†å­å®šé‡","url":"/2020/12/28/basicUVspectrumAnalysis/","content":"\næˆ‘ä»¬å®éªŒå®¤é‡‡é›†UV-Viså¸æ”¶å…‰è°±ï¼Œåªèƒ½ä¸€ä¸ªä¸€ä¸ªæ ·å“åœ°æ¥ã€‚æœ‰æ—¶å€™æˆ‘è¦å¯¹å‡ åæ¡DNAå•é“¾åšå®šé‡çš„æ—¶å€™ï¼Œä¸€ä¸ªä¸ªå»è®°å½• A_260nm çš„æ•°å€¼æ¯”è¾ƒçƒ¦ï¼ˆè€Œä¸”æœ‰æ—¶å€™å³°å€¼ä¼šæœ‰å¾®å¼±æ¼‚ç§»ï¼‰ï¼Œæ‰€ä»¥æ‰“ç®—ç”¨pythonå†™ä¸ªå°å·¥å…·æ¥å®ç°å³°å€¼çš„æå–ã€‚\n\n### æ•°æ®æ–‡ä»¶åˆ†æ\n\né€šè¿‡ä»ªå™¨é…å¥—è½¯ä»¶å¯ä»¥å¯¼å‡ºcsvæ–‡ä»¶ï¼Œå‘½åæ ¼å¼æ˜¯`Sample??.æ ·å“.csv`ã€‚\n\n![image-20201228134634805](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201228134634805.png)\n\nä½†æ˜¯csvæ–‡ä»¶å†…æ•°æ®æ¯”è¾ƒè„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n![image-20201228134427947](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201228134427947.png)\n\nç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œéƒ½ä¸æ˜¯æ­£ç»çš„å†…å®¹ï¼Œè€Œç¬¬äºŒè¡Œçš„column nameä¹Ÿå¾ˆéšæ„ï¼Œæ‰€ä»¥åé¢åœ¨ä½¿ç”¨pandasæ¨¡å—è¯»å–csvæ–‡ä»¶çš„æ—¶å€™è¦åšä¸€äº›å¤„ç†ã€‚\n\n### å®Œæ•´ä»£ç \n\nè¦å®ç°åŠŸèƒ½é™¤äº†å¾—æ­£ç¡®è¯»å–æ•°æ®ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š\n\n1. ä½¿ç”¨globæ”¶é›†csvæ–‡ä»¶ï¼ˆåˆ—è¡¨é¡ºåºæœªå¿…ç­‰åŒäºä¸Šæ ·é¡ºåºï¼‰\n2. æå–sampleçš„IDï¼ˆå¯¹åº”ç€ä½ æµ‹å®šæ ·å“çš„é¡ºåºï¼‰\n3. ä½¿ç”¨`np.argmax`è·å–å³°å€¼æ‰€åœ¨åºåˆ—çš„ç´¢å¼•ï¼Œç„¶åå–å³°å€¼\n4. æ ¹æ®sampleIDå¯¹æ•°æ®è¿›è¡Œæ’åº\n\nå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```python\nimport os, glob\nimport numpy as np\nimport pandas as pd\nimport re\n\ndef exportMaxPeak(wks):\n    '''\n    è¾“å…¥åŒ…å«UVå¸æ”¶å…‰è°±å¯¼å‡ºcsvæ–‡ä»¶çš„è·¯å¾„\n    è¾“å‡ºA260nmçš„å³°å€¼æ•°æ®è¡¨excelåˆ°ç›®å½•ä¸‹\n    æ³¨æ„ä¸è¦å¯¼å‡ºblankçš„å…‰è°±\n    '''\n    files = glob.glob(os.path.join(wks,'*.csv'))\n    data = []\n    pattern = 'Sample(\\d+).æ ·å“.csv'\n    for f in files:\n        # å¤„ç†æ–‡ä»¶åæå–ID\n        _, fname = os.path.split(f)\n        # è¯»å–å…‰è°±æ•°æ®\n        label = re.search(pattern, fname)\n        sid = label.group(1) # ç›´æ¥æå–æ•°å­—\n        sid = float(sid)\n        df = pd.read_csv(f, header=1)\n        mid = np.argmax(df[\"A\"])\n        max_wav = df[\"nm\"][mid]\n        max_OD = df[\"A\"][mid]\n        # æ”¶é›†æ•°æ®åˆ°åˆ—è¡¨\n        data.append([int(sid), max_wav, max_OD])\n    # å¤„ç†æ•°æ®è¡¨æ ¼\n    data = pd.DataFrame(data, columns=[\"Sample\",\"Wavelength\", \"PeakValue\"])\n    data.sort_values(by='Sample', inplace=True)  # æ’åº\n    data_path = os.path.join(wks,\"A260-Max.xlsx\")\n    data.to_excel(data_path, index=False)\n    print(\"æ•°æ®å·²ä¿å­˜åˆ°{}!\".format(data_path))\n\nif __name__=='__main__':\n    # ä¿®æ”¹å˜é‡wksçš„å€¼ä¸ºä½ å­˜æ”¾æ•°æ®çš„ç›®å½•\n    wks = r'D:\\Lab\\Data\\UV-Vis\\20201228'\n    exportMaxPeak(wks)\n```\n\n### å¤„ç†æ•ˆæœ\n\n![image-20201228135130971](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201228135130971.png)\n\nç„¶åå†åŸºäºç”Ÿæˆçš„è¿™ä¸ªæ±‡æ€»è¡¨ï¼ŒæŠŠå®é™…sampleçš„lableä»¥åŠåºåˆ—å¡«å†™ä¸Šå»ï¼Œå†ä½¿ç”¨`Oligo Calculator`å³å¯è®¡ç®—å‡ºæ¥æ ·å“çš„æµ“åº¦äº†ã€‚\n\n![image-20201228135309897](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201228135309897.png)\n\n### ä½¿ç”¨OligoCalculatorå·¥å…·\n\n![image-20201228131109199](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201228131109199.png)\n\nOligoCalculatorå·¥å…·[ç‚¹æ­¤é“¾æ¥](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/Oligo%20caculator.exe)ä¸‹è½½ã€‚\n\næŠŠåºåˆ—è¾“å…¥è¿›å»ï¼ˆæ³¨æ„å»é™¤ä¸€äº›ä¿®é¥°ï¼‰ï¼Œç„¶åè¾“å…¥ç´«å¤–æµ‹å¾—çš„A260å³°å€¼ï¼Œç‚¹å‡»`Caculate`å³å¯è®¡ç®—ã€‚","tags":["spectrum","DNA"],"categories":["python"]},{"title":"æ­å»ºé˜¿é‡Œäº‘OSSå›¾åºŠ","url":"/2020/12/27/mergeAllNotes/","content":"\næˆ‘çš„ç¬”è®°å¾ˆå¤šä¸œè¥¿éƒ½æ¯”è¾ƒé›¶ç¢ï¼Œè¿™æ ·ä¸é€‚åˆæ„å»ºä¸€ä¸ªæ¯”è¾ƒå®Œæ•´æœ‰åºçš„ç¬”è®°ç³»ç»Ÿï¼ˆç¬¬äºŒå¤§è„‘ï¼‰ã€‚è‡ªä»ä¸Šæ‰‹äº†github-pagesä¹‹åï¼Œå†³å®šå…¨é¢è½¬å‘markdown+githubï¼Œè¿™æ ·å¯ä»¥åˆ°å¤„è®¿é—®æŸ¥çœ‹ï¼Œä¸ºäº†è§£å†³æ’å›¾æ–‡ä»¶å¤§å°é—®é¢˜ï¼Œè¿˜ç‰¹åœ°è´­ä¹°äº†é˜¿é‡Œäº‘çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ã€‚ä¸€ç³»åˆ—çš„æ“ä½œä¸»è¦å‚è€ƒã€Š[ã€Typoraã€‘typora+picgo+é˜¿é‡Œäº‘ossæ­å»ºå›¾åºŠ](https://www.cnblogs.com/myworld7/p/13132549.html)ã€‹ã€‚\n\n### è´­ä¹°é˜¿é‡Œäº‘OSSå¹¶é…ç½®å›¾åºŠ\n\nå¯ä»¥ç›´æ¥æœç´¢[åŒ…æœˆçš„å¥—é¤](https://common-buy.aliyun.com/?spm=5176.7933691.1309819..68b22a66FQKm7f&commodityCode=ossbag&request=%7B%22region%22%3A%22china-common%22%7D#/buy)ï¼š\n\n![image-20201227162121971](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201227162121971.png)\n\næˆ‘é€‰æ‹©çš„æ˜¯40GBï¼Œå¤§é™†é€šç”¨ï¼Œä¸¤å¹´ã€‚è´­ä¹°ä¹‹åè¿›å…¥æ§åˆ¶å°æ–°å»ºä¸€ä¸ªbucketï¼ˆæ°´æ¡¶ï¼‰ã€‚\n\n![image-20201227161929457](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201227161929457.png)\n\næ³¨æ„æƒé™è®¾ç½®ä¸ºå…¬å…±å¯è¯»ï¼Œä¸ç„¶ä¸Šä¼ å‘å¸ƒåˆ°github-pagesä¸Šå°±çœ‹ä¸åˆ°äº†ã€‚\n\n### ä¸‹è½½å’Œé…ç½®picgo\n\ntyporaæ”¯æŒpicgoå›¾åºŠä¸Šä¼ å·¥å…·ï¼Œç›´æ¥åˆ°githubä¸Šä¸‹è½½æœ€æ–°ç‰ˆæœ¬\n\nhttps://github.com/Molunerfinn/PicGo/releases\n\næŠŠé˜¿é‡Œäº‘çš„Access Keyä»¥åŠå…¶ä»–ä¿¡æ¯å¤åˆ¶å¡«å…¥é…ç½®é€‰é¡¹å³å¯ï¼š\n\n![image-20201227161730671](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201227161730671.png)\n\n### é…ç½®typora\n\n![image-20201227161535243](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201227161535243.png)\n\nåˆ°è¿™ä¸€æ­¥ï¼Œå°±å¯ä»¥å¼€å¿ƒçš„åœ¨æœ¬åœ°ä½¿ç”¨typoraå†™markdownï¼Œæˆªå›¾ä½¿ç”¨`snipaste`ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´è¿‡æ¥å°±å¼€å§‹ä¸Šä¼ åˆ°è‡ªå·±çš„å›¾åºŠã€‚ä¸è¿‡ç¬¬ä¸€å¼ å›¾ç‰‡ä¼šå…ˆæ‰“å¼€picgoç¨‹åºï¼Œæ‰€ä»¥ç¨å¾®æ…¢ä¸€ç‚¹ã€‚\n\n> æƒ³æƒ³æˆ‘ä¹‹å‰è¿˜å†™äº†ä¸€ä¸ªpythonè„šæœ¬ç¼©å°å›¾ç‰‡å¤§å°ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰è¿™ä¸ªå¿…è¦äº†ï¼Œå•Šå“ˆå“ˆå“ˆå“ˆï¼","tags":["å›¾åºŠ"],"categories":["blog"]},{"title":"ä½¿ç”¨pythonæå–txtæ–‡æœ¬ä¸­å…³é”®ä¿¡æ¯å¹¶æ±‡æ€»åˆ°è¡¨æ ¼","url":"/2020/12/26/collectFilesUsingPython/","content":"\nä½¿ç”¨pythonå¤„ç†æ–‡ä»¶ã€æ–‡ä»¶å¤¹å’Œè·¯å¾„ä¹‹ç±»çš„äº‹æƒ…ï¼Œä¸»è¦æ˜¯ç”¨åˆ°`os`ã€`glob`ã€`re`å’Œ`shutil`ç­‰æ¨¡å—ã€‚\n\n### æ‰¹é‡åˆ›å»ºå­ç›®å½•\n\nåœ¨å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œä¸å¯é¿å…åœ°ä¼šæ¶‰åŠåˆ°å„ç§æ–‡ä»¶çš„æ‰¹é‡å¤„ç†ã€‚æ¯”å¦‚æˆ‘åœ¨å¤„ç†å’Œåˆ†ææ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æ ¹æ®å•ä¸ªåŸå§‹æ•°æ®åˆ›å»ºå­ç›®å½•ç”¨äºå­˜æ”¾åç»­åˆ†æäº§ç”Ÿçš„å„ç§ä¸­é—´æ•°æ®ã€‚æ‰€ä»¥æˆ‘å†™äº†ä¸‹é¢è¿™æ®µä»£ç ï¼š\n\n```python\nimport os\nfrom glob import glob\n\ndef makeSubdirectory(wks):\n    '''\n    wks: æŸæ¬¡DNA-PAINTå®éªŒå­˜æ”¾lifæ–‡ä»¶çš„ç›®å½•\n    æ­¤ç¨‹åºä¼šå¯¹lifæ–‡ä»¶è‡ªåŠ¨æ–°å»ºåŒåå­ç›®å½•\n    '''\n    lifs = glob(os.path.join(wks, \"*.lif\"))\n    for lif in lifs:\n        filepath, ext = os.path.splitext(lif)  \n        # åˆ†ç¦»æ–‡ä»¶çš„æ‹“å±•åå’Œå…¶ä»–è·¯å¾„ï¼Œæ¯”å­—ç¬¦ä¸²split('.')æ›´å®‰å…¨\n        try:\n            os.mkdir(filepath+'/')\n        except:\n            print('Subdirectory Existed! -- %s'%(filepath))\n    print('Job Finished!')\n\nif __name__ == \"__main__\":\n    wks = r\"E:\\xxd\\TIRF-LeicaDMi8\\20201221\" \n    makeSubdirectory(wks)\n```\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\n\n1. `os.mkdir`å‘½ä»¤å¦‚æœæ˜¯è·¯å¾„å·²ç»å­˜åœ¨å°±ä¼šæŠ¥é”™\n2. globä¸­å¯ä»¥ä½¿ç”¨`*`ä½œä¸ºé€šé…ç¬¦åŒ¹é…æ‰€æœ‰åç¼€ä¸º`lif`çš„åŸå§‹æ•°æ®æ–‡ä»¶ï¼Œè¿”å›ä¸€ä¸ªlist\n3. `os.path.splitext`å¯ä»¥æŠŠæ–‡ä»¶è·¯å¾„çš„åç¼€è·Ÿåå­—åˆ†å¼€\n4. `try ... except ...` å¯ä»¥æœ‰æ•ˆå¤„ç†ç¨‹åºè¿è¡Œä¸­çš„å¼‚å¸¸æƒ…å†µ\n\n### ä»txtæ–‡ä»¶ä¸­æ”¶é›†å›¾åƒå‚æ•°\n\nlifæ–‡ä»¶æ˜¯leicaæ˜¾å¾®é•œäº§ç”Ÿçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ImageJæ‰“å¼€ï¼Œç„¶åä¿å­˜ä¸ºtifï¼Œæ–¹ä¾¿åé¢çš„å¤„ç†ã€‚æ­¤æ—¶ï¼Œå›¾åƒçš„ä¸€äº›ç›¸å…³ä¿¡æ¯å¯ä»¥åœ¨ImageJä¸­æŸ¥çœ‹ï¼Œæ¯”å¦‚æ¿€å…‰å¼ºåº¦ã€æ¯å¸§é—´éš”æ—¶é—´ç­‰ã€‚ç„¶åInfoè¿˜å¯ä»¥ä¿å­˜ä¸ºtxtæ–‡ä»¶ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘å†™äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬ï¼Œæ”¶é›†Infoæ–‡ä»¶ä¸­çš„é‡è¦å‚æ•°å¹¶æ±‡æ€»åˆ°ä¸€ä¸ªexcelè¡¨æ ¼ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```python\nimport os\nfrom glob import glob\nimport pandas as pd \nimport re \n\ndef findTxt(wks):\n    infos = []\n    for d in os.walk(wks):\n        path, dirs, files = d\n        for f in files:\n            if f.startswith('Info') and f.endswith('txt'):\n                # æ ¹æ®æ–‡ä»¶å‘½åç‰¹å¾è¿›è¡Œç­›é€‰\n                txt = os.path.join(path,f)\n                infos.append(txt)\n    return infos\n\ndef extractInfo(txt):\n    '''\n    txt: Info for **.txtçš„æ–‡ä»¶è·¯å¾„\n    ==============================\n    ä»txtä¸­æå–ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š\n    1. **æ¿€å…‰å¼ºåº¦**ï¼šWFLaserChannelInfo_CurrentValue = 100\n    2. ç©¿é€æ·±åº¦ï¼šTIRF_PenetrationDepth = 171.008186233857\n    3. æ¿€å…‰æ³¢é•¿ï¼šWFLaserChannelInfo_Wavelength = 638\n    4. ç›¸æœºæ¸©åº¦ï¼šATLCameraSettingDefinition|TargetTemperature = -75\n    5. **æ¯å¸§é—´éš”æ—¶é—´**ï¼šFrame interval: 0.02046 sec\n    '''\n    recs = {'WFLaserChannelInfo_CurrentValue = ':0, \n           'TIRF_PenetrationDepth = ':0, \n           'WFLaserChannelInfo_Wavelength = ':0,\n           'TargetTemperature = ':0,\n           'Frame interval:':0}\n    # é¿å…æ„é€ å¤æ‚çš„patternæ­£åˆ™è¡¨è¾¾å¼ï¼ŒæŠŠå¤æ‚çš„å†™å…¥key\n    with open(txt) as f:\n        data = f.read()\n    \n    for key in recs:\n        pattern = '{}(.+)'.format(key)\n#         print(pattern)\n        a = re.search(pattern, data)\n        r = a.group(1)\n        if r.endswith('sec'):\n            r = r.split(' ')[1]\n        recs[key] = float(r)\n    return recs\n\ndef main(wks):\n    infos = findTxt(wks)\n    newkeys = ['ExIntensity', 'PenetrationDepth','ExWavelength','ccdTemperature','frameInterval']\n    data = {x:[] for x in newkeys}\n    for txt in infos:\n        recs = extractInfo(txt)\n        # å­—å…¸çš„é”®åä¿®æ”¹ï¼Œä½¿ç”¨popæ–¹æ³•\n        keys = list(recs.keys())\n    #     print(keys)\n        for newkey, oldkey in zip(newkeys, keys):\n            data[newkey].append(recs[oldkey])\n    data = pd.DataFrame(data)\n    data['filepath'] = infos\n    data.to_excel(os.path.join(wks, 'infos.xlsx'), index=None)\n\nif __name__ == \"__main__\":\n    wks = r\"E:\\xxd\\TIRF-LeicaDMi8\\20201223\" \n    main(wks)\n```\n\nä»£ç ç¨å¾®é•¿äº†ä¸€ç‚¹ï¼Œè¿˜å¼„å‡ºæ¥ä¸¤ä¸ªå‡½æ•°ã€‚å¯»æ‰¾Infoæ–‡ä»¶è¿˜å¥½è¯´ï¼Œå› ä¸ºæ–‡ä»¶å‘½åéƒ½å¸¦æœ‰Infoå‰ç¼€ï¼Œç„¶åæ–‡ä»¶åˆæ˜¯txtç±»å‹ï¼Œç›´æ¥åˆ©ç”¨`os.walk`è·å–æ€»çš„å·¥ä½œç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Œç„¶åéå†ï¼Œæ ¹æ®æ–‡ä»¶åè¿›è¡Œç­›é€‰å³å¯ã€‚æ³¨æ„`os.walk`è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ¯æ¬¡åå‡ºæ¥ä¸€ä¸ªæ ¹ç›®å½•è·¯å¾„ï¼Œæ ¹ç›®å½•ä¸‹æ–‡ä»¶å¤¹åˆ—è¡¨ä»¥åŠæ–‡ä»¶åˆ—è¡¨ç»„æˆçš„ä¸‰å…ƒå…ƒç»„ã€‚\n\nä»`Info.txt`ä¸­æå–ä¿¡æ¯è¿˜é¢‡ä¸ºè´¹äº‹ï¼Œå› ä¸ºInfoä¸­ä¿¡æ¯é‡éå¸¸å¤§ï¼Œæˆ‘ä¸å¯èƒ½ç”¨`f.readlines()`çš„æ–¹æ³•å»è¯»å–æŒ‡å®šçš„è¡Œï¼Œæ‰€ä»¥é€‰æ‹©äº†ç”¨æ­£åˆ™åŒ¹é…çš„æ–¹å¼ã€‚ä½†æ˜¯æ­£åˆ™æˆ‘ç”¨å¾—å¾ˆå°‘ï¼Œè€Œä¸”ä¸ºäº†å‡è½»æ­£åˆ™patternçš„è®¾è®¡éš¾åº¦ï¼Œæˆ‘æŠŠpatternä¸­å˜åŒ–çš„éƒ¨åˆ†å°½å¯èƒ½åœ°å®šä¹‰åˆ°å­—å…¸çš„keyä¸­ã€‚æˆ‘è§‰å¾—è¿™ä¸ªæ€è·¯ï¼ˆæ‹¿é€šç”¨æ€§æ¢æ•ˆç‡ï¼‰è¿˜æŒºä¸é”™çš„â€”â€”èƒ½æŠŠäº‹æƒ…è§£å†³å°±å¥½ã€‚reæ¨¡å—ä¸­æˆ‘å¸¸ç”¨searchå’Œfindallä¸¤ä¸ªåŠŸèƒ½ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼š\n\n1. re.searchåªè¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸²\n2. re.findallè¿”å›æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²æ‰€ç»„æˆçš„list\n3. å¦‚æœpatternä¸­æ”¾æ‹¬å·ï¼Œæ‹¬å·å¯ä»¥ä½œä¸ºgroupæå–ä¿¡æ¯ï¼Œä½†æ˜¯æ³¨æ„groupçš„ç´¢å¼•id\n4. ä¿®æ”¹å­—å…¸çš„é”®åçš„æ–¹æ³•\n5. ä½¿ç”¨pandasæ¨¡å—ï¼Œæ„å»ºdataframeï¼Œç„¶åæ–¹ä¾¿ä¿å­˜ä¸ºexcelå¯ä»¥æ‰“å¼€çš„xlsxæ–‡ä»¶\n\nå®ç°æ•ˆæœå¦‚ä¸‹ï¼š\n\n![image-20201227120627018](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201227120627018.png)\n\n\n\n","tags":["filepath"],"categories":["python"]},{"title":"æ‰¹é‡ç¼©å°åšå®¢ä¸­çš„å›¾ç‰‡","url":"/2020/12/24/resizeImages/","content":"\nç›®å‰æˆ‘æœ€ç†Ÿæ‚‰[python](https://www.liaoxuefeng.com/wiki/1016959663602400)ï¼Œå¦å¤–ä¹Ÿä¼šå†™ä¸€ç‚¹[ImageJçš„è„šæœ¬å¤„ç†](https://zhuanlan.zhihu.com/p/60999196)å’Œåˆ†æå›¾åƒã€‚å¯æ˜¯ç¼–ç¨‹æŠ€èƒ½â€œç”¨è¿›åºŸé€€â€ï¼Œç‰¹åˆ«æ˜¯äººå¹´çºªè¶Šå¤§ï¼Œå¯¹äºå„ç§ç¹å¤çš„ä»£ç ç»†èŠ‚å°±è¶Šéš¾è®°å¿†ã€‚æ‰€ä»¥å¾ˆå¤šç å†œéƒ½ä¼šå†™åšå®¢ï¼Œå¹¶ä¸”æŠŠåšå®¢å½“ä½œâ€œç¬¬äºŒå¤§è„‘â€ã€‚æˆ‘å½“ç„¶ä¹Ÿä¸ä¾‹å¤–ï¼Œä»¥åä¹Ÿæ—¶ä¸æ—¶ä¼šæŠŠè‡ªå·±å†™è¿‡çš„ä»£ç æ•´ç†åˆ°åšå®¢ä¸Šã€‚\n\n### éœ€æ±‚\n\næˆ‘å–œæ¬¢åœ¨æ–‡ç« ä¸­æ’å…¥æˆªå›¾ï¼Œå®ç°å›¾æ–‡å¹¶èŒ‚çš„æ•ˆæœã€‚ä½†æ˜¯githubçš„ä»“åº“å®¹é‡æœ‰é™ï¼Œè€Œä¸”å›¾ç‰‡å¤§å°å°ºå¯¸ä¸ä¸€é€ æˆä¸ç¾è§‚ã€‚è™½ç„¶å¯ä»¥å®šä¹‰`css`æ–‡ä»¶æ¥æ§åˆ¶æ˜¾ç¤ºï¼Œä½†å®ƒåªèƒ½è§£å†³ç¾è§‚é—®é¢˜ã€‚è€Œä½¿ç”¨å›¾åºŠèƒ½å¤Ÿé¿å…å›¾ç‰‡å¤ªå¤šè¶…å‡ºä»“åº“å®¹é‡é™åˆ¶ï¼Œä½†æŠŠå„ç§å›¾ç‰‡æ”¾åˆ°å…¬å…±å›¾åºŠä¸Šæ—¢ä¸èƒ½è®©æˆ‘æ”¾å¿ƒï¼Œä¹Ÿè·Ÿæˆ‘ç›®å‰çš„workflowä¸å…¼å®¹ã€‚æ‰€ä»¥æˆ‘å†³å®šå†™ä¸€ä¸ªå°çš„å·¥å…·ä»£ç ï¼Œå®ç°å¯¹æ’å›¾æ–‡ä»¶çš„resizeã€‚å…·ä½“æœ‰ä»¥ä¸‹éœ€æ±‚ï¼š\n\n1. æ”¯æŒå¯¹png, jpg, jpegç­‰å¸¸è§å›¾åƒçš„resize\n2. å·²ç»resizeçš„ä¸è¦è¿›è¡Œé‡å¤çš„æ“ä½œ\n3. åŸå§‹å¤§å›¾è¦ä¿ç•™è€Œä¸”æ–¹ä¾¿æŸ¥æ‰¾\n4. ä¸ç ´åmarkdownä¸­å¯¹å›¾ç‰‡çš„å¼•ç”¨\n\n### ä»£ç \n\nä»£ç è¦ç‚¹å¦‚ä¸‹ï¼š\n\n1. ä½¿ç”¨globæ‰¹é‡è¯»å–å¤šç§æ ¼å¼çš„å›¾ç‰‡åœ°å€åˆ°åˆ—è¡¨\n2. è¿‡æ»¤å·²ç»è¢«resizeå¤„ç†çš„å›¾ç‰‡\n3. pillowåº“ä¸­çš„resizeæ–¹æ³•çš„è°ƒç”¨\n\nåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼š\n\n```python\nfrom PIL import Image \nimport os \nfrom glob import glob\n\ndef resizeImages(wks):\n    '''\n    è¾“å…¥makrdowné™„ä»¶ç›®å½•åœ°å€ï¼Œ\n    å¯¹å…¶ä¸­æ‰€æœ‰png\\jpg\\jpegç­‰æ ¼å¼çš„å›¾åƒè¿›è¡Œç¼©å°ï¼Œ\n    å›ºå®šå®½åº¦åˆ°600ï¼Œ\n    åŸå›¾è¢«é‡å‘½åå¸¦`_large.*`åç¼€\n    å¦‚æœæœ‰å¸¦æ­¤åç¼€çš„ï¼Œåˆ™ä¸¤å¼ å›¾åƒéƒ½ä¸è¿›è¡Œå¤„ç†\n    '''\n    files = []\n    formats = ['png','jpg','jpeg']\n    # å¦‚æœæƒ³å‹ç¼©gifï¼Œè¯·å‚è€ƒ\n    # https://blog.csdn.net/huanyue6660/article/details/79423326\n    for ext in formats:\n        files.extend(glob(os.path.join(wks, '*.{}'.format(ext))))  # ä½¿ç”¨extendçš„æ–¹å¼åˆå¹¶æ–°å¢çš„list\n    \n    jobs = []\n    for f in files:\n        ext = os.path.splitext(f)[-1]\n        if (f+'_large%s'%(ext) in files) or (f.endswith('large%s'%(ext))):\n            continue\n        else:\n            jobs.append(f)\n\n    for job in jobs:\n        ext = os.path.splitext(job)[-1]  # è·å–æ–‡ä»¶åç¼€åï¼Œæ³¨æ„è¿™ä¸ªå¸¦ç‚¹\n        a = Image.open(job)\n        a.save(job+'_large{}'.format(ext))\n        w, h = a.size\n        if w>600:\n            # åªç¼©å°å¤§å›¾\n            b = a.resize(size=(600, int(h*600/w))) # æ³¨æ„sizeå¾—æ˜¯æ•´æ•°\n        else:\n            b = a\n        b.save(job)\n        print('{} resized to width = 600 px!'.format(job))\n\nif __name__ == \"__main__\":\n    wks = r\"D:\\hexo\\blog\\source\\_posts\"  # windowsç³»ç»Ÿæ–‡ä»¶è·¯å¾„ï¼Œæ³¨æ„ä¸è¦å»æ‰r\n    subdirs = glob(os.path.join(wks,\"*/\"))\n    # print(subdirs)\n    # å¯¹_postsç›®å½•ä¸‹æ‰€æœ‰å›¾ç‰‡è¿›è¡Œå¤„ç†\n    for subdir in subdirs:\n        resizeImages(subdir)\n```\n\n### ä½¿ç”¨\n\næˆ‘å–œæ¬¢æŠŠè¿™ç§é«˜å¤ç”¨çš„å°å·¥å…·ä»£ç åšå¥½æ¥å£ï¼Œå†™åˆ°pythonè„šæœ¬ä¸­ï¼Œç„¶åç”¨é…ç½®å¥½çš„vscodeæ‰“å¼€ï¼Œæ ¹æ®éœ€æ±‚ä¿®æ”¹å‚æ•°ï¼ˆè¿™é‡Œæ˜¯`_posts`ç›®å½•çš„åœ°å€ï¼‰ï¼Œç„¶åæŒ‰`Ctrl+F5`è¿è¡Œã€‚\n\n### ç»“æœ\n\n![image-20201224114927774](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201224114927774.png)\n\nåŸå§‹å›¾åƒè¢«é‡åä¸ºå¸¦`_large`åç¼€çš„æ–‡ä»¶ã€‚","tags":["pillow"],"categories":["python"]},{"title":"åœ¨gitub-pagesæ­å»ºHexoåšå®¢","url":"/2020/12/20/setupHexoWebsite/","content":"\n\næˆ‘æ‰“ç®—ç”¨**hexo**ç»“åˆ**github pages**æ„å»ºä¸€ä¸ªè½»åšå®¢ç½‘ç«™ï¼Œæ¯å‘¨å‘è¡¨è‡³å°‘ä¸€ç¯‡åšæ–‡ã€‚\n\n<!-- more -->\n\n### Hexoå»ºç«™å‚è€ƒæ•™ç¨‹\n\nä½¿ç”¨hexoå»ºç«™åˆ°**github pages**çš„å®Œæ•´æ•™ç¨‹æ¨èå¦‚ä¸‹ï¼š\n\nhttps://zhuanlan.zhihu.com/p/78467553\n\nhttps://segmentfault.com/a/1190000017986794\n\nhttps://theme-stun.github.io/docs/zh-CN/\n\nhttps://hexo.io/zh-cn/index.html\n\nhttps://blog.csdn.net/hhgggggg/article/details/77853665\n\n### ä½¿ç”¨**Stun**ä¸»é¢˜\n\n[stunä¸»é¢˜](https://theme-stun.github.io/docs/zh-CN/guide/quick-start.html#%E5%AE%89%E8%A3%85)æ¯”è¾ƒå¥½çœ‹ï¼Œæˆ‘è¿˜ç¨å¾®é…ç½®äº†ä¸€ä¸‹å¯ä»¥[è·Ÿtyporaè¿ç”¨](https://www.cnblogs.com/caoayu/articles/13855081.html)ï¼ˆä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºæ’å›¾å’Œé™„ä»¶ï¼‰ã€‚æ•ˆæœå¦‚ä¸‹å›¾ï¼š\n\n![image-20201222100030247](https://sheldon-notes.oss-cn-shanghai.aliyuncs.com/img/image-20201222100030247.png)\n\n### éœ€è¦å®‰è£…çš„æ’ä»¶åˆ—è¡¨\n\n1. gitç›¸å…³æ’ä»¶ï¼Œç”¨äºdeployåˆ°github pagesä¸Š\n2. searchç›¸å…³æ’ä»¶ï¼Œæ–¹ä¾¿å¯¹ç«™å†…å†…å®¹è¿›è¡Œæœç´¢\n3. asset-imagerç›¸å…³æ’ä»¶ï¼Œæ–¹ä¾¿æ’å›¾é™„ä»¶ä¹‹ç±»çš„\n\n### å¼€å¯è¯„è®ºç³»ç»Ÿ\n\ngitalkæ’ä»¶æ˜¯åˆ©ç”¨githubä»“åº“çš„issueåŠŸèƒ½ï¼Œä¸ºäº†èŠ‚çº¦ç©ºé—´ï¼Œæˆ‘å¦å¤–å¼€äº†ä¸€ä¸ª**sea-comments**çš„ä»“åº“ä½œä¸ºå­˜å‚¨ã€‚ç„¶åç…§ç€ä»¥ä¸‹æ•™ç¨‹è¿›è¡Œæ“ä½œï¼š\n\nhttps://www.jianshu.com/p/4242bb065550\n\nhttps://theme-stun.github.io/docs/zh-CN/advanced/third-part.html#gitalk\n\nhttps://github.com/gitalk/gitalk\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œstunä¸»é¢˜å·²ç»åµŒå…¥äº†gitalkï¼Œåªè¦åˆ°stunä¸»é¢˜ä¸‹çš„`_config.yaml`ä¸‹æ·»åŠ è‡ªå·±è¯„è®ºä»“åº“çš„ä¸€äº›ä¿¡æ¯å³å¯ã€‚\n\n> gitalkä¼šå‡ºç°Error NetworkæŠ¥é”™ï¼Œå¼ƒç”¨~ï¼Œä¹‹åä½¿ç”¨`valine`ï¼Œè¯„è®ºæ•°æ®å­˜å‚¨åœ¨`LeanCloud`ä¸­ï¼Œå¦‚æœ‰å¿…è¦ï¼ŒåŠæ—¶å¤‡ä»½ã€‚\n>\n> https://theme-stun.github.io/docs/zh-CN/advanced/third-part.html#valine\n\n### å¸¸ç”¨å‘½ä»¤\n\néœ€è¦è¿›å…¥åˆ°hexoç½‘ç«™çš„æœ¬åœ°æ ¹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œä»¥windowsç³»ç»Ÿä¸ºä¾‹ï¼š\n\n1. `hexo clean && hexo g && hexo s`: è‹¥ä¿®æ”¹äº†**_config.yaml**é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ¸…é™¤ publicç›®å½•ä¸‹æ‰€æœ‰å†…å®¹ï¼Œç„¶åæ ¹æ®æ–°çš„é…ç½®æ–‡ä»¶é‡æ–°ç”Ÿæˆé™æ€ç½‘é¡µï¼Œå¹¶ä¸”å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨\n2. `hexo clean && hexo d`ï¼šä¿®æ”¹é…ç½®åï¼Œé‡æ–°å‘å¸ƒåˆ°gitee pagesä¸Šã€‚\n\n### æ³¨æ„äº‹é¡¹\n\n1. å°½é‡ä½¿ç”¨`hexo new`å‘½ä»¤ç”Ÿæˆ pagesæˆ–è€…æ–°çš„markdownæ–‡ä»¶ï¼Œç„¶ååˆ°`_posts`ç›®å½•ä¸‹å¯¹markdownæ–‡ä»¶è¿›è¡Œç¼–è¾‘ä¿®æ”¹ï¼ˆä½¿ç”¨typoraï¼‰ã€‚\n2. markdownæ–‡ä»¶å‘½ååªèƒ½ä¸ºè‹±æ–‡æˆ–è€…æ•°å­—ï¼Œè€Œæ ‡é¢˜å¯ä»¥åœ¨markdownæ–‡ä»¶é‡Œè¾¹çš„**Front Matter YAML**ä¸­è¿›è¡Œè®¾å®šï¼ˆ**Front Matter YAMLè®¾å®šéå¸¸é‡è¦**ï¼Œå‚è€ƒ[é“¾æ¥](https://hexo.io/zh-cn/docs/front-matter)ï¼‰ã€‚\n3. githubä»“åº“å®¹é‡æœ‰é™ï¼ˆ< 1 GBï¼‰ï¼Œé•¿æœŸä½¿ç”¨ä¸ªäººåšå®¢ï¼Œæ³¨æ„ä¸è¦æ’å…¥å¤ªå¤šå¤ªå¤§çš„å›¾ç‰‡ï¼Œå»ºè®®æ˜¯ä¸€ç¯‡åšæ–‡å›¾ç‰‡ä¸è¶…è¿‡10å¼ ã€‚\n4. åšå®¢å†…å®¹å®Œå…¨å…¬å¼€ï¼Œæ³¨æ„ä¸è¦å‘å¸ƒè¿æ³•æˆ–è€…å¼•å‘èˆ†è®ºçš„å†…å®¹ï¼Œå¹¶æ³¨æ„ä¿æŠ¤ä¸ªäººéšç§ã€‚","tags":["hexo"],"categories":["blog"]}]